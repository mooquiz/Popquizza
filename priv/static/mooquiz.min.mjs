var a=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},q=class{static fromArray(t,r){let n=r||new _t;for(let i=t.length-1;i>=0;--i)n=new Ge(t[i],n);return n}[Symbol.iterator](){return new Ir(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof _t}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function h(e,t){return new Ge(e,t)}function d(e,t){return q.fromArray(e,t)}var Ir=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof _t)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},_t=class extends q{},Ge=class extends q{constructor(t,r){super(),this.head=t,this.tail=r}},je=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return dt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=dt(this.rawBuffer,this.bitOffset,i),o=dt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=dt(this.rawBuffer,this.bitOffset,r),s=dt(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(ci("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ci("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function dt(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Ht=class{constructor(t){this.value=t}},ai={};function ci(e,t){ai[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),ai[e]=!0)}var Ze=class e extends a{static isResult(t){return t instanceof e}},_=class extends Ze{constructor(t){super(),this[0]=t}isOk(){return!0}},$=class extends Ze{constructor(t){super(),this[0]=t}isOk(){return!1}};function y(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!fi(n)||!fi(i)||!wo(n,i)||fo(n,i)||po(n,i)||_o(n,i)||mo(n,i)||$o(n,i)||ho(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=co(n);for(let f of l(n))r.push(u(n,f),u(i,f))}return!0}function co(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function fo(e,t){return e instanceof Date&&(e>t||e<t)}function po(e,t){return!(e instanceof je)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function _o(e,t){return Array.isArray(e)&&e.length!==t.length}function mo(e,t){return e instanceof Map&&e.size!==t.size}function $o(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ho(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function fi(e){return typeof e=="object"&&e!==null}function wo(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function T(e,t){return t===0?0:e%t}function O(e,t){return Math.trunc(mt(e,t))}function mt(e,t){return t===0?0:e/t}function J(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var ee=class extends a{},G=class extends a{},Z=class extends a{};var m=class extends a{constructor(t){super(),this[0]=t}},x=class extends a{};function $t(e,t){if(e instanceof m){let r=e[0];return new _(r)}else return new $(t)}function pi(e,t){return e instanceof m?e[0]:t}function Ve(e,t,r){return di(t,r,e)}function xo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function go(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return xo(n,d([]));{let i=r.head[0];e=r.tail,t=h(i,n)}}}function Dr(e){return go(Rt(e),d([]))}function Oo(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function Ke(e){return Oo(e,0)}function vo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function I(e){return vo(e,d([]))}function So(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return I(s);{let o=n.head;e=n.tail,t=i,r=h(i(o),s)}}}function M(e,t){return So(e,t,d([]))}function Oe(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function _i(e,t){return Oe(e,0,(r,n)=>t(n)?r+1:r)}function Lo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,l),r=o,n=l+1}}}function Gt(e,t,r){return Lo(e,t,r,0)}function mi(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let l=o[0];return new _(l)}else e=s,t=n}}}function $i(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;{let i=r.head,s=r.tail;if(n(i))return!0;e=s,t=n}}}function Ao(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&i.atLeastLength(1)){let o=n.head,l=n.tail,u=i.head,f=i.tail;e=l,t=f,r=h([o,u],s)}else return I(s)}}function Fr(e,t){return Ao(e,t,d([]))}function zo(e,t,r){for(;;){let n=e,i=t,s=r,o=wt(n,i);if(o instanceof G)return h(i,s);o instanceof Z?(e=n,t=i+1,r=h(i,s)):(e=n,t=i-1,r=h(i,s))}}function Jr(e,t){return zo(e,t,d([]))}function Yr(e,t){return mi(e,r=>{let n=r[0],i=r[1];return y(n,t)?new _(i):new $(void 0)})}function Gr(e,t,r){let i=e,s=Pr(i,t,r);return s}function xt(e,t,r){if(r<0)return"";if(t<0){let s=gt(e)+t;return s<0?"":Rr(e,s,r)}else return Rr(e,t,r)}function Zr(e){let r=re(e);return r}function Bo(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=s+n}}function Vr(e,t){return Bo(e,t,"")}function Co(e,t){let r=gt(t),n=O(e,r),i=T(e,r);return Vr(t,n)+xt(t,0,i)}function C(e,t,r){let n=gt(e),i=t-n;return i<=0?e:Co(i,r)+e}function Vt(e){let r=bi(e);return ki(r)}function Kt(e,t){for(;;){let r=e,n=t;if(n>0){let s=Xt(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function ne(e,t){if(t==="")return Ur(e);{let n=e,i=Hr(n,t);return M(i,A)}}function Kr(e){let t=se(e);return t}function V(e,t){if(e.isOk()){let r=e[0];return new _(t(r))}else{let r=e[0];return new $(r)}}function Ce(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return new $(t(r))}}function ve(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new $(r)}}function Ae(e,t){return ve(e,t)}function Ai(e){return e.isOk(),e[0]}function Qr(e,t){if(e.isOk()){let r=e[0];return new _(r)}else return new $(t)}var We=class extends a{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Fo(e,t){return Ce(e,r=>M(r,t))}function qi(e){return tn(e)}function Mi(e){return t=>{if(e.hasLength(0))return new $(d([new We("another type",Ne(t),d([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new _(s)}else return Mi(n)(t)}}}function Jo(e,t){let r=t,n=Mi(d([tn,o=>V(ji(o),w)])),i=(()=>{let o=n(r);if(o.isOk())return o[0];{let l=d(["<",Ne(r),">"]),u=re(l);return u}})(),s=e;return new We(s.expected,s.found,h(i,e.path))}function en(e,t){return r=>{let n=new We("field","nothing",d([]));return ve(Ei(r,e),i=>{let o=$t(i,d([n])),l=ve(o,t);return Fo(l,u=>Jo(u,e))})}}var Ti=new WeakMap,rn=new DataView(new ArrayBuffer(8)),nn=0;function sn(e){let t=Ti.get(e);if(t!==void 0)return t;let r=nn++;return nn===2147483647&&(nn=0),Ti.set(e,r),r}function on(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ln(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ci(e){rn.setFloat64(0,e);let t=rn.getInt32(0),r=rn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Yo(e){return ln(e.toString())}function Po(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return sn(e);if(e instanceof Date)return Ci(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+U(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+U(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+on(U(n),U(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+on(U(o),ln(s))|0}}return r}function U(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ci(e);case"string":return ln(e);case"bigint":return Yo(e);case"object":return Po(e);case"symbol":return sn(e);case"function":return sn(e);default:return 0}}var ue=5,an=Math.pow(2,ue),Uo=an-1,Ho=an/2,Ro=an/4,N=0,oe=1,D=2,Ie=3,cn={type:D,bitmap:0,array:[]};function bt(e,t){return e>>>t&Uo}function rr(e,t){return 1<<bt(e,t)}function Go(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function fn(e,t){return Go(e&t-1)}function H(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Zo(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function un(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Wi(e,t,r,n,i,s){let o=U(t);if(o===n)return{type:Ie,hash:o,array:[{type:N,k:t,v:r},{type:N,k:i,v:s}]};let l={val:!1};return kt(pn(cn,e,o,t,r,l),e,n,i,s,l)}function kt(e,t,r,n,i,s){switch(e.type){case oe:return Vo(e,t,r,n,i,s);case D:return pn(e,t,r,n,i,s);case Ie:return Ko(e,t,r,n,i,s)}}function Vo(e,t,r,n,i,s){let o=bt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:oe,size:e.size+1,array:H(e.array,o,{type:N,k:n,v:i})};if(l.type===N)return y(n,l.k)?i===l.v?e:{type:oe,size:e.size,array:H(e.array,o,{type:N,k:n,v:i})}:(s.val=!0,{type:oe,size:e.size,array:H(e.array,o,Wi(t+ue,l.k,l.v,r,n,i))});let u=kt(l,t+ue,r,n,i,s);return u===l?e:{type:oe,size:e.size,array:H(e.array,o,u)}}function pn(e,t,r,n,i,s){let o=rr(r,t),l=fn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==N){let p=kt(u,t+ue,r,n,i,s);return p===u?e:{type:D,bitmap:e.bitmap,array:H(e.array,l,p)}}let f=u.k;return y(n,f)?i===u.v?e:{type:D,bitmap:e.bitmap,array:H(e.array,l,{type:N,k:n,v:i})}:(s.val=!0,{type:D,bitmap:e.bitmap,array:H(e.array,l,Wi(t+ue,f,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Ho){let f=new Array(32),p=bt(r,t);f[p]=pn(cn,t+ue,r,n,i,s);let c=0,b=e.bitmap;for(let L=0;L<32;L++){if((b&1)!==0){let S=e.array[c++];f[L]=S}b=b>>>1}return{type:oe,size:u+1,array:f}}else{let f=Zo(e.array,l,{type:N,k:n,v:i});return s.val=!0,{type:D,bitmap:e.bitmap|o,array:f}}}}function Ko(e,t,r,n,i,s){if(r===e.hash){let o=dn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Ie,hash:r,array:H(e.array,o,{type:N,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:Ie,hash:r,array:H(e.array,l,{type:N,k:n,v:i})}}return kt({type:D,bitmap:rr(e.hash,t),array:[e]},t,r,n,i,s)}function dn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(y(t,e.array[n].k))return n;return-1}function tr(e,t,r,n){switch(e.type){case oe:return Xo(e,t,r,n);case D:return Qo(e,t,r,n);case Ie:return eu(e,n)}}function Xo(e,t,r,n){let i=bt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==N)return tr(s,t+ue,r,n);if(y(n,s.k))return s}}function Qo(e,t,r,n){let i=rr(r,t);if((e.bitmap&i)===0)return;let s=fn(e.bitmap,i),o=e.array[s];if(o.type!==N)return tr(o,t+ue,r,n);if(y(n,o.k))return o}function eu(e,t){let r=dn(e,t);if(!(r<0))return e.array[r]}function _n(e,t,r,n){switch(e.type){case oe:return tu(e,t,r,n);case D:return ru(e,t,r,n);case Ie:return nu(e,n)}}function tu(e,t,r,n){let i=bt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===N){if(!y(s.k,n))return e}else if(o=_n(s,t+ue,r,n),o===s)return e;if(o===void 0){if(e.size<=Ro){let l=e.array,u=new Array(e.size-1),f=0,p=0,c=0;for(;f<i;){let b=l[f];b!==void 0&&(u[p]=b,c|=1<<f,++p),++f}for(++f;f<l.length;){let b=l[f];b!==void 0&&(u[p]=b,c|=1<<f,++p),++f}return{type:D,bitmap:c,array:u}}return{type:oe,size:e.size-1,array:H(e.array,i,o)}}return{type:oe,size:e.size,array:H(e.array,i,o)}}function ru(e,t,r,n){let i=rr(r,t);if((e.bitmap&i)===0)return e;let s=fn(e.bitmap,i),o=e.array[s];if(o.type!==N){let l=_n(o,t+ue,r,n);return l===o?e:l!==void 0?{type:D,bitmap:e.bitmap,array:H(e.array,s,l)}:e.bitmap===i?void 0:{type:D,bitmap:e.bitmap^i,array:un(e.array,s)}}return y(n,o.k)?e.bitmap===i?void 0:{type:D,bitmap:e.bitmap^i,array:un(e.array,s)}:e}function nu(e,t){let r=dn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Ie,hash:e.hash,array:un(e.array,r)}}function Ni(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===N){t(s.v,s.k);continue}Ni(s,t)}}}var Se=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=tr(this.root,0,U(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?cn:this.root,s=kt(i,0,U(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=_n(this.root,0,U(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:tr(this.root,0,U(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ni(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+on(U(r),U(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!y(t.get(n,!r),r))throw Bi}),!0}catch(r){if(r===Bi)return!1;throw r}}},Bi=Symbol();var mn=void 0,Ii={};function A(e){return e}function De(e){return/^[-+]?(\d+)$/.test(e)?new _(parseInt(e)):new $(mn)}function w(e){return e.toString()}function nr(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function Pr(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function gt(e){if(e==="")return 0;let t=ir(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Ur(e){let t=ir(e);return t?q.fromArray(Array.from(t).map(r=>r.segment)):q.fromArray(e.match(/./gsu))}var Di;function ir(e){if(globalThis.Intl&&Intl.Segmenter)return Di||=new Intl.Segmenter,Di.segment(e)[Symbol.iterator]()}function Xt(e){let t,r=ir(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new _([t,e.slice(t.length)]):new $(mn)}function Fe(e){return[e.charCodeAt(0)|0,e.slice(1)]}function P(e){return e.toLowerCase()}function Hr(e,t){return q.fromArray(e.split(t))}function ie(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function re(e){let t="";for(let r of e)t=t+r;return t}function Rr(e,t,r){if(r<=0||t>=e.length)return"";let n=ir(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function B(e,t,r){return e.slice(t,t+r)}function Qt(e,t){return e.startsWith(t)}var Yi=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),iu=new RegExp(`^[${Yi}]*`),su=new RegExp(`[${Yi}]*$`);function bi(e){return e.replace(iu,"")}function ki(e){return e.replace(su,"")}function Pi(e){typeof process=="object"&&process.stderr?.write?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function te(){return Se.new()}function Rt(e){return q.fromArray(e.entries())}function ht(e,t){let r=e.get(t,Ii);return r===Ii?new $(mn):new _(r)}function di(e,t,r){return r.set(e,t)}function Ne(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Ze)return"Result";if(e instanceof q)return"List";if(e instanceof je)return"BitArray";if(e instanceof Se)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function $n(e,t){return ou(e,Ne(t))}function ou(e,t){return new $(q.fromArray([new We(e,t,q.fromArray([]))]))}function tn(e){return typeof e=="string"?new _(e):$n("String",e)}function ji(e){return Number.isInteger(e)?new _(e):$n("Int",e)}function Ei(e,t){let r=()=>$n("Dict",e);if(e instanceof Se||e instanceof WeakMap||e instanceof Map){let n=ht(e,t);return new _(n.isOk()?new m(n[0]):new x)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Fi(e,t,()=>new _(new x)):Fi(e,t,r)}function Fi(e,t,r){try{return t in e?new _(new m(e[t])):r()}catch{return r()}}function se(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return uu(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return nr(e);if(Array.isArray(e))return`#(${e.map(se).join(", ")})`;if(e instanceof q)return fu(e);if(e instanceof Ht)return pu(e);if(e instanceof je)return`<<${Li(e,"")}>>`;if(e instanceof a)return cu(e);if(e instanceof Se)return lu(e);if(e instanceof Set)return`//js(Set(${[...e].map(se).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return au(e)}function uu(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function lu(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+se(i)+", "+se(n)+")",r=!1}),t+"])"}function au(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${se(s)}: ${se(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function cu(e){let t=Object.keys(e).map(r=>{let n=se(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function fu(e){return`[${e.toArray().map(se).join(", ")}]`}function pu(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Li(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function wt(e,t){return e===t?new G:e<t?new ee:new Z}function et(e){let r=Kr(e);return Pi(r),e}function Ui(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new _(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new $(new sr(r.message,n))}}function Hi(e,t){e.lastIndex=0;let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0];return new Je(i,mu(n.slice(1)))});return q.fromArray(r)}function mu(e){let t=[];for(let r=e.length-1;r>=0;r--){if(e[r]){t[r]=new m(e[r]);continue}t.length>0&&(t[r]=new x)}return q.fromArray(t)}var Je=class extends a{constructor(t,r){super(),this.content=t,this.submatches=r}},sr=class extends a{constructor(t,r){super(),this.error=t,this.byte_index=r}},hn=class extends a{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function $u(e,t){return Ui(e,t)}function Ri(e){return $u(e,new hn(!1,!1))}function Gi(e,t){return Hi(e,t)}function Ot(e,t,r){return e?t:r()}var vt=class extends a{constructor(t,r,n){super(),this.year=t,this.month=r,this.day=n}};var le=class extends a{},ae=class extends a{},ce=class extends a{},fe=class extends a{},pe=class extends a{},de=class extends a{},_e=class extends a{},me=class extends a{},$e=class extends a{},he=class extends a{},Le=class extends a{},St=class extends a{};function Lt(e,t){return(e>0&&t<0||e<0&&t>0)&&T(e,t)!==0?O(e,t)-1:O(e,t)}function gu(e,t){let r=T(e,t);return r>0&&t<0||r<0&&t>0?r+t:r}function At(e,t){return[Lt(e,t),gu(e,t)]}var Ye=864e8;var X=36e8;var Pe=6e7;var ur=1e6;var Xi=1,lr=0,ku=0,Ou=0,Qi=!1,es=!1,ar=0;function Vi(){return Date.now()*1e3+ar}function Ki(){return Math.trunc(performance.now()*1e3)+ar}function ts(){if(es)return lr+ar;if(Qi){let e=Vi()-ku,t=Math.trunc(e*Xi);return lr+t}return Vi()}function rs(){return-new Date().getTimezoneOffset()}function ns(){if(es)return lr+ar;if(Qi){let e=Ki()-Ou,t=Math.trunc(e*Xi);return lr+t}return Ki()}var vu=1;function is(){return vu++}var wn=class extends a{constructor(t,r,n,i){super(),this.timestamp_utc_us=t,this.offset_local_us=r,this.monotonic_us=n,this.unique=i}},fr=class extends a{constructor(t,r,n){super(),this.date=t,this.time=r,this.offset=n}};var pr=class extends a{constructor(t){super(),this.minutes=t}},qt=class extends a{constructor(t){super(),this.unix_days=t}},xn=class extends a{constructor(t,r){super(),this.month=t,this.year=r}},Q=class extends a{constructor(t){super(),this.microseconds=t}},rt=class extends a{};var gn=class extends a{},yn=class extends a{},bn=class extends a{},Mt=class extends a{},jt=class extends a{constructor(t){super(),this.format=t}};var zt=class extends a{constructor(t){super(),this[0]=t}},Ue=class extends a{constructor(t){super(),this[0]=t}};var kn=class extends a{},On=class extends a{constructor(t){super(),this.format=t}},vn=class extends a{constructor(t,r){super(),this.format=t,this.locale=r}},Sn=class extends a{},Ln=class extends a{},An=class extends a{},zn=class extends a{constructor(t){super(),this.format=t}},qn=class extends a{constructor(t,r){super(),this.format=t,this.locale=r}};function ss(e){return e.minutes}function cr(e){let t=(()=>{let s=O(ss(e),60);return s<=0?[!0,-s]:[!1,s]})(),r=t[0],n=t[1],i=(()=>{let s=T(ss(e),60);return s<0?-s:s})();if(n===0&&i===0)return"+00:00";if(n===0){let s=i;return"-00:"+(()=>{let o=w(s);return C(o,2,"0")})()}else if(r){let s=n,o=i;return"-"+(()=>{let l=w(s);return C(l,2,"0")})()+":"+(()=>{let l=w(o);return C(l,2,"0")})()}else{let s=n,o=i;return"+"+(()=>{let l=w(s);return C(l,2,"0")})()+":"+(()=>{let l=w(o);return C(l,2,"0")})()}}function Lu(e,t){if(e==="z"){if(t.minutes===0)return"Z";{let n=cr(t),i=ne(n,":");return i.hasLength(2)&&i.tail.head==="00"?i.head:n}}else{if(e==="zz")return t.minutes===0?"Z":cr(t);if(e==="Z")return cr(t);if(e==="ZZ"){let n=cr(t);return Gr(n,":","")}else return e}}function cs(e){return new qt(O(e,Ye))}function Au(e){return cs(e.timestamp_utc_us)}function zu(e){return cs(e.timestamp_utc_us+e.offset_local_us)}function jn(e){return T(e.unix_days+4,7)}function os(e){let t=jn(e);if(t===0)return"Sun";if(t===1)return"Mon";if(t===2)return"Tue";if(t===3)return"Wed";if(t===4)return"Thu";if(t===5)return"Fri";if(t===6)return"Sat";throw J("panic","tempo",1665,"date_to_day_of_week_short","Invalid day of week found after modulo by 7",{})}function qu(e){let t=jn(e);if(t===0)return"Sunday";if(t===1)return"Monday";if(t===2)return"Tuesday";if(t===3)return"Wednesday";if(t===4)return"Thursday";if(t===5)return"Friday";if(t===6)return"Saturday";throw J("panic","tempo",1678,"date_to_day_of_week_long","Invalid day of week found after modulo by 7",{})}function Mu(e){let t=e-1,r=Lt(t,4)-Lt(t,100)+Lt(t,400);return 365*t+r}function ju(e){return e===1?new _(new le):e===2?new _(new ae):e===3?new _(new ce):e===4?new _(new fe):e===5?new _(new pe):e===6?new _(new de):e===7?new _(new _e):e===8?new _(new me):e===9?new _(new $e):e===10?new _(new he):e===11?new _(new Le):e===12?new _(new St):new $(void 0)}function Mn(e){return e instanceof le?1:e instanceof ae?2:e instanceof ce?3:e instanceof fe?4:e instanceof pe?5:e instanceof de?6:e instanceof _e?7:e instanceof me?8:e instanceof $e?9:e instanceof he?10:e instanceof Le?11:12}function Eu(e){return e instanceof le?"Jan":e instanceof ae?"Feb":e instanceof ce?"Mar":e instanceof fe?"Apr":e instanceof pe?"May":e instanceof de?"Jun":e instanceof _e?"Jul":e instanceof me?"Aug":e instanceof $e?"Sep":e instanceof he?"Oct":e instanceof Le?"Nov":"Dec"}function Tu(e){return e instanceof le?"January":e instanceof ae?"February":e instanceof ce?"March":e instanceof fe?"April":e instanceof pe?"May":e instanceof de?"June":e instanceof _e?"July":e instanceof me?"August":e instanceof $e?"September":e instanceof he?"October":e instanceof Le?"November":"December"}function Bu(e){return T(e,4)===0?T(e,100)===0?T(e,400)===0:!0:!1}function Cu(e){let t=e.month;return t instanceof le?31:t instanceof ae?Bu(e.year)?29:28:t instanceof ce?31:t instanceof fe?30:t instanceof pe?31:t instanceof de?30:t instanceof _e||t instanceof me?31:t instanceof $e?30:t instanceof he?31:t instanceof Le?30:31}function Wu(e,t){return Cu(new xn(e,t))}function Nu(e,t,r){for(;;){let n=e,i=t,s=r,o=Wu(i,n);if(Mn(i)<12&&s>o)e=n,t=i instanceof le?new ae:i instanceof ae?new ce:i instanceof ce?new fe:i instanceof fe?new pe:i instanceof pe?new de:i instanceof de?new _e:i instanceof _e?new me:i instanceof me?new $e:i instanceof $e?new he:i instanceof he?new Le:new St,r=s-o;else return new vt(n,i,s)}}function dr(e){if(e instanceof Q&&e.microseconds<0){let t=e.microseconds;return new Q(Ye+T(t,Ye))}else if(e instanceof Q&&e.microseconds>=Ye){let t=e.microseconds;return new Q(T(t,Ye))}else return e}function Iu(e){return new Q(e)}function tt(e){let t=dr(e);if(t instanceof Q){let r=t.microseconds;return O(r,X)}else return t instanceof rt?24:23}function us(e){let t=dr(e);if(t instanceof Q){let r=t.microseconds,n=O(r,X);return O(r-n*X,Pe)}else return t instanceof rt?0:59}function ls(e){let t=dr(e);if(t instanceof Q){let r=t.microseconds,n=O(r,X),i=O(r-n*X,Pe);return O(r-n*X-i*Pe,ur)}else return t instanceof rt?0:60}function as(e){let t=dr(e);if(t instanceof Q){let r=t.microseconds,n=O(r,X),i=O(r-n*X,Pe),s=O(r-n*X-i*Pe,ur);return r-n*X-i*Pe-s*ur}else return t instanceof rt?0:t.microseconds}function Du(e,t){if(e==="H"){let r=tt(t);return w(r)}else if(e==="HH"){let r=tt(t),n=w(r);return C(n,2,"0")}else if(e==="h"){let r=(()=>{let n=tt(t);if(n===0){let i=n;return 12}else return n>12?n-12:n})();return w(r)}else if(e==="hh"){let r=(()=>{let i=tt(t);if(i===0){let s=i;return 12}else return i>12?i-12:i})(),n=w(r);return C(n,2,"0")}else{if(e==="a")return tt(t)>=12?"pm":"am";if(e==="A")return tt(t)>=12?"PM":"AM";if(e==="m"){let r=us(t);return w(r)}else if(e==="mm"){let r=us(t),n=w(r);return C(n,2,"0")}else if(e==="s"){let r=ls(t);return w(r)}else if(e==="ss"){let r=ls(t),n=w(r);return C(n,2,"0")}else if(e==="SSS"){let r=O(as(t),1e3),n=w(r);return C(n,3,"0")}else if(e==="SSSS"){let r=as(t),n=w(r);return C(n,6,"0")}else return e}}function fs(e){return Iu(T(e,Ye))}function Fu(e){return fs(e.timestamp_utc_us)}function Ju(e){return fs(e.timestamp_utc_us+e.offset_local_us)}function Yu(e){return new fr(zu(e),Ju(e),new pr(O(e.offset_local_us,6e7)))}function Pu(e){return e instanceof gn?"YYYY-MM-DDTHH:mm:sszz":e instanceof yn?"YYYY-MM-DDTHH:mm:ss.SSSzz":e instanceof bn?"YYYY-MM-DDTHH:mm:ss.SSSSzz":e instanceof Mt?"ddd, DD MMM YYYY HH:mm:ss GMT":e instanceof zt&&e[0]instanceof kn?"YYYY-MM-DD":e instanceof Ue&&e[0]instanceof Sn?"HH:mm:ss":e instanceof Ue&&e[0]instanceof Ln?"HH:mm:ss.SSS":e instanceof Ue&&e[0]instanceof An?"HH:mm:ss.SSSS":e instanceof Ue&&e[0]instanceof zn||e instanceof Ue&&e[0]instanceof qn||e instanceof zt&&e[0]instanceof On||e instanceof zt&&e[0]instanceof vn?e[0].format:(e instanceof jt,e.format)}function Uu(){return rs()*6e7}function ps(){return new wn(ts(),Uu(),ns(),is())}var Hu=new pr(0);function Ru(e){return new fr(Au(e),Fu(e),Hu)}var Gu=719163;function ds(e){return e.unix_days+Gu}function Zu(e){let t=ds(e),r=At(t,146097),n=r[0],i=r[1],s=At(i,36524),o=s[0],l=s[1],u=At(l,1461),f=u[0],p=u[1],c=At(p,365),b=c[0],L=c[1],S=L===0?0:1;return n*400+o*100+f*4+b+S}function Vu(e){if(e>=0){let r=e+719468,n=O(r>=0?r:r-146096,146097),i=r-n*146097,s=O(i-O(i,1460)+O(i,36524)-O(i,146096),365),o=s+n*400,l=i-(365*s+O(s,4)-O(s,100)),u=O(5*l+2,153),f=l-O(153*u+2,5)+1,p=u+(u<10?3:-9),c=p<=2?o+1:o,b=ju(p);if(!b.isOk())throw J("let_assert","tempo",1743,"date_calendar_from_unix_days","Pattern match failed, no pattern matched the value.",{value:b});let L=b[0];return new vt(c,L,f)}else{let r=(()=>{let s=new qt(e);return ds(s)})(),n=(()=>{let s=new qt(e);return Zu(s)})(),i=r-Mu(n);return Nu(n,new le,i)}}function Ku(e){return Vu(e.unix_days)}function Xu(e,t){let r=Ku(t);if(e==="YY"){let n=r.year,i=w(n),s=C(i,2,"0");return xt(s,-2,2)}else if(e==="YYYY"){let n=r.year,i=w(n);return C(i,4,"0")}else if(e==="M"){let n=r.month,i=Mn(n);return w(i)}else if(e==="MM"){let n=r.month,i=Mn(n),s=w(i);return C(s,2,"0")}else if(e==="MMM"){let n=r.month;return Eu(n)}else if(e==="MMMM"){let n=r.month;return Tu(n)}else if(e==="D"){let n=r.day;return w(n)}else if(e==="DD"){let n=r.day,i=w(n);return C(i,2,"0")}else if(e==="d"){let i=jn(t);return w(i)}else if(e==="dd"){let i=os(t);return xt(i,0,2)}else return e==="ddd"?os(t):e==="dddd"?qu(t):e}var Qu="\\[([^\\]]+)\\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|z{1,2}|S{3,4}|GMT|.";function _s(e,t){let r=Pu(t),n=Ri(Qu);if(!n.isOk())throw J("let_assert","tempo",1e3,"datetime_format","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=Gi(i,r),o=I(s),l=Oe(o,d([]),(u,f)=>{if(f instanceof Je&&f.submatches.hasLength(0)){let p=f.content;return h((()=>{let b=Xu(p,e.date),L=Du(b,e.time);return Lu(L,e.offset)})(),u)}else if(f instanceof Je&&f.submatches.hasLength(1)&&f.submatches.head instanceof m){let p=f.submatches.head[0];return h(p,u)}else{let p=f.content;return h(p,u)}});return ie(l,"")}function el(e){let t=ps(),r=Ru(t);return _s(r,e)}function ms(e){if(e instanceof Mt)return el(new Mt);{let t=ps(),r=Yu(t);return _s(r,e)}}var _r=class extends a{constructor(t){super(),this.all=t}};function $s(e){return new _r(d([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Cn(e){return $s((t,r,n,i)=>e(t))}function Wn(){return new _r(d([]))}var nt=class extends a{constructor(t){super(),this.content=t}},j=class extends a{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Tt=class extends a{constructor(t){super(),this.subtree=t}},it=class extends a{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Bt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function cl(e){if(e instanceof it)return new $(void 0);{let t=e[0],r=e[1],n=Kt(t,2);return new _([n,r])}}function fl(e,t,r){return Gt(e,t,(n,i,s)=>{let o=r+"-"+w(s);return hs(i,n,o)})}function hs(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof nt)return i;if(n instanceof Tt){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,l=n.children,u=Oe(o,i,(f,p)=>{let c=cl(p);if(c.isOk()){let b=c[0][0],L=c[0][1];return Ve(f,s+"-"+b,L)}else return f});return fl(l,u,s)}}}function ws(e){return hs(e,te(),"0")}function mr(e,t){return new it(e,t,!1)}function gs(e,t){return new Bt("on"+e,t)}function we(e){return mr("class",e)}function ys(e){return mr("type",e)}function bs(e){return mr("value",e)}function ks(e){return mr("name",e)}function xe(e,t,r){return e==="area"?new j("","",e,t,d([]),!1,!0):e==="base"?new j("","",e,t,d([]),!1,!0):e==="br"?new j("","",e,t,d([]),!1,!0):e==="col"?new j("","",e,t,d([]),!1,!0):e==="embed"?new j("","",e,t,d([]),!1,!0):e==="hr"?new j("","",e,t,d([]),!1,!0):e==="img"?new j("","",e,t,d([]),!1,!0):e==="input"?new j("","",e,t,d([]),!1,!0):e==="link"?new j("","",e,t,d([]),!1,!0):e==="meta"?new j("","",e,t,d([]),!1,!0):e==="param"?new j("","",e,t,d([]),!1,!0):e==="source"?new j("","",e,t,d([]),!1,!0):e==="track"?new j("","",e,t,d([]),!1,!0):e==="wbr"?new j("","",e,t,d([]),!1,!0):new j("","",e,t,r,!1,!1)}function Os(e){return new nt(e)}var In=class extends a{constructor(t){super(),this.dict=t}};function vs(){return new In(te())}var $r=class extends a{constructor(t){super(),this[0]=t}},hr=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},wr=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function Ss(e){return y(e.created,te())&&y(e.removed,vs())&&y(e.updated,te())}var xr=class extends a{constructor(t){super(),this[0]=t}},gr=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Ct=class extends a{constructor(t){super(),this[0]=t}},ge=class extends a{constructor(t){super(),this[0]=t}},Wt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},yr=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};var Nt=class extends a{},br=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},kr=class extends a{constructor(t){super(),this[0]=t}},Or=class extends a{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Dn(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);l.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);l.appendChild(u),n??=u}else if(o.tag!==void 0){let u=hl({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&l.replaceChild(u,s):l.appendChild(u),n??=u}}return n}function hl({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(It.has(o))l=It.get(o);else{let k=new Map;It.set(o,k),l=k}let u=s?new Set(l.keys()):null,f=s?new Set(Array.from(e.attributes,k=>k.name)):null,p=null,c=null,b=null;if(s&&t.tag==="textarea"){let k=t.children[Symbol.iterator]().next().value?.content;k!==void 0&&(o.value=k)}let L=[];for(let k of t.attrs){let v=k[0],E=k[1];if(k.as_property)o[v]!==E&&(o[v]=E),s&&f.delete(v);else if(v.startsWith("on")){let F=v.slice(2),Nr=r(E,F==="input");l.has(F)||o.addEventListener(F,Dt),l.set(F,Nr),s&&u.delete(F)}else if(v.startsWith("data-lustre-on-")){let F=v.slice(15),Nr=r(wl);l.has(F)||o.addEventListener(F,Dt),l.set(F,Nr),o.setAttribute(v,E),s&&(u.delete(F),f.delete(v))}else v.startsWith("delegate:data-")||v.startsWith("delegate:aria-")?(o.setAttribute(v,E),L.push([v.slice(10),E])):v==="class"?p=p===null?E:p+" "+E:v==="style"?c=c===null?E:c+E:v==="dangerous-unescaped-html"?b=E:(o.getAttribute(v)!==E&&o.setAttribute(v,E),(v==="value"||v==="selected")&&(o[v]=E),s&&f.delete(v))}if(p!==null&&(o.setAttribute("class",p),s&&f.delete("class")),c!==null&&(o.setAttribute("style",c),s&&f.delete("style")),s){for(let k of f)o.removeAttribute(k);for(let k of u)l.delete(k),o.removeEventListener(k,Dt)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let k of o.assignedElements())for(let[v,E]of L)k.hasAttribute(v)||k.setAttribute(v,E)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(b!==null)return o.innerHTML=b,o;let S=o.firstChild,R=null,He=null,Re=null,Me=vr(t).next().value;if(s&&Me!==void 0&&Me.key!==void 0&&Me.key!==""){R=new Set,He=Ls(e),Re=Ls(t);for(let k of vr(t))S=xl(S,k,o,n,Re,He,R)}else for(let k of vr(t))n.unshift({prev:S,next:k,parent:o}),S=S?.nextSibling;for(;S;){let k=S.nextSibling;o.removeChild(S),S=k}return o}var It=new WeakMap;function Dt(e){let t=e.currentTarget;if(!It.has(t)){t.removeEventListener(e.type,Dt);return}let r=It.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Dt);return}r.get(e.type)(e)}function wl(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let u=0,f=s,p=e;u<l.length;u++)u===l.length-1?f[l[u]]=p[l[u]]:(f[l[u]]??={},p=p[l[u]],f=f[l[u]]);return s},{data:n})}}function Ls(e){let t=new Map;if(e)for(let r of vr(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function xl(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*vr(e){for(let t of e.children)yield*As(t)}function*As(e){e.subtree!==void 0?yield*As(e.subtree()):yield e}var Fn=class e{static start({init:t,update:r,view:n},i,s){if(!Yn())return new $(new Ft);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new $(new Sr(i));let l=new e(o,t(s),r,n);return new _(u=>l.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof Ct){if(t[0]instanceof Or){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof _&&this.send(new ge(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Dn(i,r,n)}}else if(t instanceof ge){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof Wt){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof Nt)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof _&&this.send(new ge(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Dn(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=l=>this.send(new ge(l)),i=(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},zs=Fn.start;var Jn=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new _(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=ws(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof xr){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof $||this.#r.push(i)}this.#u()}else if(t instanceof gr)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof Ct))if(t instanceof ge)this.#r.push(t[0]),this.#u();else if(t instanceof Wt){let r=new hr(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof yr){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof $)return;this.#r.push(n[0]),this.#u()}else if(t instanceof br){let r=Dr(this.#l),n=new wr(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof kr&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#a(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!Ss(n)){let i=new $r(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new ge(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},gl=Jn.start,Yn=()=>globalThis.window&&window.document;var Pn=class extends a{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Sr=class extends a{constructor(t){super(),this.selector=t}},Ft=class extends a{};function qs(e,t,r){return new Pn(e,t,r,new x)}function Ms(e,t,r){return Ot(!Yn(),new $(new Ft),()=>zs(e,t,r))}function ye(e){return Os(e)}function js(e,t){return xe("h1",e,t)}function Es(e,t){return xe("h2",e,t)}function Ts(e,t){return xe("main",e,t)}function ze(e,t){return xe("div",e,t)}function Bs(e,t){return xe("span",e,t)}function Cs(e,t){return xe("button",e,t)}function Ws(e){return xe("input",e,d([]))}function Ns(e,t){return xe("label",e,t)}function Is(e,t){return gs(e,t)}function Ds(e){return Is("click",t=>new _(e))}function kl(e){let t=e;return en("target",en("value",qi))(t)}function Fs(e){return Is("input",t=>{let r=kl(t);return V(r,e)})}var g=class extends a{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Ll(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function ke(e,t){return new _((()=>{let r=t;return new g(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new m(e))})())}function Al(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("#")&&l===0){let u=s.slice(1);return ke(u,o)}else if(s.startsWith("#")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,c.host,c.port,c.path,new m(f),c.fragment)})();return ke(u,p)}else{if(s==="")return new _((()=>{let u=o;return new g(u.scheme,u.userinfo,u.host,u.port,u.path,new m(i),u.fragment)})());{let f=Fe(s)[1];e=i,t=f,r=o,n=l+1}}}}function qe(e,t){return Al(e,e,t,0)}function zl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("?")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,c.host,c.port,f,c.query,c.fragment)})();return qe(u,p)}else if(s.startsWith("#")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,c.host,c.port,f,c.query,c.fragment)})();return ke(u,p)}else{if(s==="")return new _((()=>{let u=o;return new g(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let f=Fe(s)[1];e=i,t=f,r=o,n=l+1}}}}function ot(e,t){return zl(e,e,t,0)}function be(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),l=(()=>{let u=i;return new g(u.scheme,u.userinfo,u.host,new m(s),u.path,u.query,u.fragment)})();return qe(o,l)}else if(n.startsWith("#")){let o=n.slice(1),l=(()=>{let u=i;return new g(u.scheme,u.userinfo,u.host,new m(s),u.path,u.query,u.fragment)})();return ke(o,l)}else if(n.startsWith("/")){let o=(()=>{let l=i;return new g(l.scheme,l.userinfo,l.host,new m(s),l.path,l.query,l.fragment)})();return ot(n,o)}else return n===""?new _((()=>{let o=i;return new g(o.scheme,o.userinfo,o.host,new m(s),o.path,o.query,o.fragment)})()):new $(void 0)}}function Lr(e,t){if(e.startsWith(":0")){let r=e.slice(2);return be(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return be(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return be(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return be(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return be(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return be(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return be(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return be(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return be(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return be(r,t,9)}else{if(e.startsWith(":"))return new $(void 0);if(e.startsWith("?")){let r=e.slice(1);return qe(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return ke(r,t)}else return e.startsWith("/")?ot(e,t):e===""?new _(t):new $(void 0)}}function Js(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new _((()=>{let u=o;return new g(u.scheme,u.userinfo,new m(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=B(i,0,l),f=(()=>{let p=o;return new g(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return Lr(s,f)}else if(s.startsWith("/")){let u=B(i,0,l),f=(()=>{let p=o;return new g(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return ot(s,f)}else if(s.startsWith("?")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,new m(f),c.port,c.path,c.query,c.fragment)})();return qe(u,p)}else if(s.startsWith("#")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,new m(f),c.port,c.path,c.query,c.fragment)})();return ke(u,p)}else{let f=Fe(s)[1];e=i,t=f,r=o,n=l+1}}}function ql(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new _((()=>{let u=o;return new g(u.scheme,u.userinfo,new m(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&l===0){let u=s.slice(1);return Lr(u,o)}else if(s.startsWith("]")){let u=s.slice(1),f=B(i,0,l+1),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,new m(f),c.port,c.path,c.query,c.fragment)})();return Lr(u,p)}else{if(s.startsWith("/")&&l===0)return ot(s,o);if(s.startsWith("/")){let u=B(i,0,l),f=(()=>{let p=o;return new g(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return ot(s,f)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return qe(u,o)}else if(s.startsWith("?")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,new m(f),c.port,c.path,c.query,c.fragment)})();return qe(u,p)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return ke(u,o)}else if(s.startsWith("#")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,c.userinfo,new m(f),c.port,c.path,c.query,c.fragment)})();return ke(u,p)}else{let u=Fe(s),f=u[0],p=u[1];if(Ll(f))e=i,t=p,r=o,n=l+1;else return Js(i,i,o,0)}}}}function Ml(e,t){return ql(e,e,t,0)}function jl(e,t){return Js(e,e,t,0)}function st(e,t){if(e.startsWith("["))return Ml(e,t);if(e.startsWith(":")){let r=(()=>{let n=t;return new g(n.scheme,n.userinfo,new m(""),n.port,n.path,n.query,n.fragment)})();return Lr(e,r)}else return e===""?new _((()=>{let r=t;return new g(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})()):jl(e,t)}function El(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("@")&&l===0){let u=s.slice(1);return st(u,o)}else if(s.startsWith("@")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(c.scheme,new m(f),c.host,c.port,c.path,c.query,c.fragment)})();return st(u,p)}else{if(s==="")return st(i,o);if(s.startsWith("/"))return st(i,o);if(s.startsWith("?"))return st(i,o);if(s.startsWith("#"))return st(i,o);{let f=Fe(s)[1];e=i,t=f,r=o,n=l+1}}}}function Tl(e,t){return El(e,e,t,0)}function Un(e,t){if(e==="//")return new _((()=>{let r=t;return new g(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return Tl(r,t)}else return ot(e,t)}function Bl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("/")&&l===0)return Un(s,o);if(s.startsWith("/")){let u=B(i,0,l),f=(()=>{let p=o;return new g(new m(P(u)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment)})();return Un(s,f)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return qe(u,o)}else if(s.startsWith("?")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(new m(P(f)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment)})();return qe(u,p)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return ke(u,o)}else if(s.startsWith("#")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(new m(P(f)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment)})();return ke(u,p)}else{if(s.startsWith(":")&&l===0)return new $(void 0);if(s.startsWith(":")){let u=s.slice(1),f=B(i,0,l),p=(()=>{let c=o;return new g(new m(P(f)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment)})();return Un(u,p)}else{if(s==="")return new _((()=>{let u=o;return new g(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let f=Fe(s)[1];e=i,t=f,r=o,n=l+1}}}}}function Ys(e){let t=(()=>{let l=e.fragment;if(l instanceof m){let u=l[0];return d(["#",u])}else return d([])})(),r=(()=>{let l=e.query;if(l instanceof m){let u=l[0];return h("?",h(u,t))}else return t})(),n=h(e.path,r),i=(()=>{let l=e.host,u=Qt(e.path,"/");if(l instanceof m&&!u&&l[0]!==""){let f=l[0];return h("/",n)}else return n})(),s=(()=>{let l=e.host,u=e.port;if(l instanceof m&&u instanceof m){let f=u[0];return h(":",h(w(f),i))}else return i})(),o=(()=>{let l=e.scheme,u=e.userinfo,f=e.host;if(l instanceof m&&u instanceof m&&f instanceof m){let p=l[0],c=u[0],b=f[0];return h(p,h("://",h(c,h("@",h(b,s)))))}else if(l instanceof m&&u instanceof x&&f instanceof m){let p=l[0],c=f[0];return h(p,h("://",h(c,s)))}else if(l instanceof m&&u instanceof m&&f instanceof x){let p=l[0];return h(p,h(":",s))}else if(l instanceof m&&u instanceof x&&f instanceof x){let p=l[0];return h(p,h(":",s))}else if(l instanceof x&&u instanceof x&&f instanceof m){let p=f[0];return h("//",h(p,s))}else return s})();return Zr(o)}var Cl=new g(new x,new x,new x,new x,"",new x,new x);function Hn(e){return Bl(e,e,Cl,0)}var Jt=class extends a{},Ar=class extends a{},Rn=class extends a{},Gn=class extends a{},Zn=class extends a{},Vn=class extends a{},Kn=class extends a{},Xn=class extends a{},Qn=class extends a{};var zr=class extends a{},Yt=class extends a{};function Us(e){return e instanceof Kn?"CONNECT":e instanceof Zn?"DELETE":e instanceof Jt?"GET":e instanceof Rn?"HEAD":e instanceof Xn?"OPTIONS":e instanceof Qn?"PATCH":e instanceof Ar?"POST":e instanceof Gn?"PUT":e instanceof Vn?"TRACE":e[0]}function Hs(e){return e instanceof zr?"http":"https"}function Rs(e){let t=P(e);return t==="http"?new _(new zr):t==="https"?new _(new Yt):new $(void 0)}var ti=class extends a{constructor(t,r,n,i,s,o,l,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=u}};function Zs(e){return new g(new m(Hs(e.scheme)),new x,new m(e.host),e.port,e.path,e.query,new x)}function Vs(e){return Ae((()=>{let t=e.scheme,r=pi(t,"");return Rs(r)})(),t=>Ae((()=>{let r=e.host;return $t(r,void 0)})(),r=>{let n=new ti(new Jt,d([]),"",t,r,e.port,e.path,e.query);return new _(n)}))}var qr=class extends a{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function Ks(e,t){return Yr(e.headers,P(t))}var ut=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Mr(e){return Promise.resolve(ut.wrap(e))}function Xs(e,t){return e.then(r=>t(ut.unwrap(r)))}function Pt(e,t){return e.then(r=>ut.wrap(t(ut.unwrap(r))))}function Qs(e,t){return Pt(e,n=>(t(n),n))}function jr(e,t){return Xs(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Mr(new $(i))}})}async function to(e){try{return new _(await fetch(e))}catch(t){return new $(new ct(t.toString()))}}function ro(e){return new qr(e.status,q.fromArray([...e.headers]),e)}function Jl(e){let t=Ys(Zs(e)),r=Us(e.method).toUpperCase(),n={headers:Yl(e.headers),method:r};return[t,n]}function no(e){let[t,r]=Jl(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function Yl(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function ri(e){let t;try{t=await e.body.text()}catch{return new $(new ft)}return new _(e.withFields({body:t}))}var ct=class extends a{constructor(t){super(),this[0]=t}},ft=class extends a{};function io(e){let r=no(e),n=to(r);return jr(n,i=>Mr(new _(ro(i))))}var ni=e=>{if(!globalThis.location)return new $(void 0);let t=new URL(e,globalThis.location.href),r=Ul(t);return new _(r)},Ul=e=>{let t=r=>r?new m(r):new x;return new g(t(e.protocol?.slice(0,-1)),new x,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var Er=class extends a{},Tr=class extends a{constructor(t){super(),this[0]=t}},ii=class extends a{constructor(t){super(),this[0]=t}};var si=class extends a{},Br=class extends a{constructor(t){super(),this[0]=t}},oi=class extends a{constructor(t){super(),this.run=t}};function Hl(e){return new oi(t=>e(ve(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new _(r)}else if(n>=400&&n<600){let i=n;return new $(new ii(r))}else return new $(new Br(r))})))}function Rl(e){return Hl(t=>e(ve(t,r=>{let n=Ks(r,"content-type");return n.isOk()&&n[0].startsWith("text/")?new _(r):new $(new Br(r))})))}function oo(e){return Rl(t=>{let n=V(t,i=>i.body);return e(n)})}function Gl(e,t){return Cn(r=>{let n=io(e),i=jr(n,ri),s=Pt(i,l=>Ce(l,u=>u instanceof ct?new si:u instanceof ft?new Er:new Er)),o=Pt(s,t.run);Qs(o,r)})}function Zl(e,t){return Gl(e,t)}function so(e,t){return Cn(r=>{let n=new $(e),i=t.run(n);return r(i)})}function Vl(e){let t=e.startsWith("./")?ni(e):e.startsWith("/")?ni(e):Hn(e);return Qr(t,new Tr(e))}function uo(e,t){let r=Vl(e);if(r.isOk()){let n=r[0],i=Vs(n),s=V(i,l=>Zl(l,t)),o=Ce(s,l=>so(new Tr(e),t));return Ai(o)}else{let n=r[0];return so(n,t)}}var ui=class extends a{constructor(t,r){super(),this.pos=t,this.text=r}},Cr=class extends a{constructor(t,r,n,i,s){super(),this.id=t,this.text=r,this.answers=n,this.correct=i,this.selected=s}},Wr=class extends a{},li=class extends a{constructor(t){super(),this[0]=t}},Ut=class extends a{constructor(t){super(),this[0]=t}},pt=class extends a{constructor(t,r,n){super(),this.title=t,this.submitted=r,this.questions=n}};function lo(e){return $i(e.questions,t=>y(t.selected,new x))}function Xl(e,t){return[(()=>{if(t instanceof Ut&&t[0].isOk()){let n=t[0][0];et("Pulled Questions");let i=(()=>{let p=Vt(n);return ne(p,`

`)})();if(!i.atLeastLength(1))throw J("let_assert","mooquiz",57,"update","Pattern match failed, no pattern matched the value.",{value:i});let s=i.head,o=i.tail,l=M(o,f=>{let p=ne(f,`
`);if(!p.atLeastLength(2))throw J("let_assert","mooquiz",59,"","Pattern match failed, no pattern matched the value.",{value:p});let c=p.head,b=p.tail.head,L=p.tail.tail,S=(()=>{let He=Ke(L),Re=Jr(He,1),Me=I(Re),k=Fr(Me,L);return M(k,v=>{let E=v[0],F=v[1];return new ui(E,F)})})();return[c,b,S]}),u=(()=>{let p=Ke(l),c=Jr(p,1),b=I(c),L=Fr(b,l);return M(L,S=>{let R=S[0],He=S[1][0],Re=S[1][1],Me=S[1][2];return new Cr(R,He,Me,(()=>{let k=De(Re);return k.isOk()?k[0]:0})(),new x)})})();return et("Title: "+s),et(u),new pt(s,!1,u)}else{if(t instanceof Ut&&!t[0].isOk())return et("Pulling failed"),e;if(t instanceof Wr){if(lo(e))return e;{et("Submitted Answers");let i=e;return new pt(i.title,!0,i.questions)}}else{let n=t[0],i=ne(n,"-");if(i.hasLength(2)){let s=i.head,o=i.tail.head,l=De(s);if(l.isOk()){let u=l[0],f=M(e.questions,c=>{if(u===c.id){let L=De(o);if(L.isOk()){let S=L[0],R=c;return new Cr(R.id,R.text,R.answers,R.correct,new m(S))}else return c}else return c}),p=e;return new pt(p.title,p.submitted,f)}else return e}else return e}}})(),Wn()]}function Ql(e){let t=_i(e,i=>y(i.selected,new m(i.correct))),r=Ke(e);return[M(e,i=>y(i.selected,new m(i.correct))?"\u2705":"\u274C"),t,r]}function ea(e){let t=Ql(e.questions),r=t[0],n=t[1],i=t[2];return ze(d([we("border-2 border-zinc-600 rounded-lg p-4")]),d([ze(d([]),d([ye("You scored "+w(n)+" out of "+w(i))])),ze(d([]),d([ye(ie(r,""))]))]))}function ta(e){if(e.submitted)return ea(e);{let r=lo(e)?"bg-zinc-600 cursor-not-allowed":"active:translate-y-0.5 active:scale-95 border-zinc-600 bg-zinc-200";return Cs(d([Ds(new Wr),we("duration-200 border border-zinc-600 p-2 rounded-md "+r)]),d([ye("Submit")]))}}function ra(e,t,r){let n=y(e.selected,new m(t.pos)),i=e.correct===t.pos;return r&&i?ye("\u2705"):r&&n&&!i?ye("\u274C"):r?ye(""):Ws(d([ys("radio"),ks("question-"+w(e.id)),bs(w(e.id)+"-"+w(t.pos)),Fs(s=>new li(s))]))}function na(e,t,r){let n=(()=>{let i=y(t.selected,new m(e.pos)),s=t.correct===e.pos;return!r&&i?"bg-blue-200":r&&i&&s?"bg-green-200 font-bold":r&&i&&!s?"bg-red-200 font-bold":r&&!i&&s?"bg-green-200":"bg-zinc-100"})();return Ns(d([we("block w-full flex duration-200 p-2 "+n)]),d([Bs(d([we("grow")]),d([ye(e.text)])),ra(t,e,r)]))}function ia(e){return ze(d([]),d([Ts(d([we("max-w-2xl mx-auto p-8")]),d([js(d([we("text-xl font-bold mb-8")]),d([ye(e.title)])),ze(d([]),M(e.questions,t=>ze(d([we("mb-4")]),d([Es(d([we("text-lg font-semibold")]),d([ye(t.text)])),ze(d([we("flex flex-col gap-2")]),M(t.answers,r=>na(r,t,e.submitted)))])))),ta(e)]))]))}var sa="https://raw.githubusercontent.com/mooquiz/Questions/refs/heads/main/";function oa(e){let t=new pt("Loading",!1,d([])),r=sa+ms(new jt("YYYYMMDD"))+".txt";return[t,uo(r,oo(n=>new Ut(n)))]}function ao(){let e=qs(oa,Xl,ia),t=Ms(e,"#app",void 0);if(!t.isOk())throw J("let_assert","mooquiz",36,"main","Pattern match failed, no pattern matched the value.",{value:t})}ao();
