var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},L=class{static fromArray(t,r){let n=r||new yt;for(let i=t.length-1;i>=0;--i)n=new Fe(t[i],n);return n}[Symbol.iterator](){return new en(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof yt}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function h(e,t){return new Fe(e,t)}function f(e,t){return L.fromArray(e,t)}var en=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof yt)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},yt=class extends L{},Fe=class extends L{constructor(t,r){super(),this.head=t,this.tail=r}},tt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return gt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=gt(this.rawBuffer,this.bitOffset,i),o=gt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=gt(this.rawBuffer,this.bitOffset,r),s=gt(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Ai("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Ai("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function gt(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Li={};function Ai(e,t){Li[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Li[e]=!0)}var rt=class e extends c{static isResult(t){return t instanceof e}},_=class extends rt{constructor(t){super(),this[0]=t}isOk(){return!0}},$=class extends rt{constructor(t){super(),this[0]=t}isOk(){return!1}};function g(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!zi(n)||!zi(i)||!eu(n,i)||Go(n,i)||Zo(n,i)||Vo(n,i)||Ko(n,i)||Xo(n,i)||Qo(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=Ro(n);for(let a of l(n))r.push(u(n,a),u(i,a))}return!0}function Ro(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Go(e,t){return e instanceof Date&&(e>t||e<t)}function Zo(e,t){return!(e instanceof tt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Vo(e,t){return Array.isArray(e)&&e.length!==t.length}function Ko(e,t){return e instanceof Map&&e.size!==t.size}function Xo(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Qo(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function zi(e){return typeof e=="object"&&e!==null}function eu(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function J(e,t){return t===0?0:e%t}function j(e,t){return Math.trunc(bt(e,t))}function bt(e,t){return t===0?0:e/t}function C(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var me=class extends c{},X=class extends c{},Q=class extends c{};var m=class extends c{constructor(t){super(),this[0]=t}},w=class extends c{};function kt(e,t){if(e instanceof m){let r=e[0];return new _(r)}else return new $(t)}function qi(e,t){return e instanceof m?e[0]:t}function nt(e,t,r){return Ei(t,r,e)}function tu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function ru(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return tu(n,f([]));{let i=r.head[0];e=r.tail,t=h(i,n)}}}function tn(e){return ru(rr(e),f([]))}function ou(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function it(e){return ou(e,0)}function uu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function M(e){return uu(e,f([]))}function lu(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head;e=n.tail,t=i,r=h(i(o),s)}}}function S(e,t){return lu(e,t,f([]))}function au(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new _(M(s));{let o=n.head,l=n.tail,u=i(o);if(u.isOk()){let a=u[0];e=l,t=i,r=h(a,s)}else{let a=u[0];return new $(a)}}}}function rn(e,t){return au(e,t,f([]))}function cu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function He(e,t){return cu(M(e),t)}function he(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function ji(e,t){return he(e,0,(r,n)=>t(n)?r+1:r)}function fu(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,l),r=o,n=l+1}}}function nr(e,t,r){return fu(e,t,r,0)}function Mi(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let l=o[0];return new _(l)}else e=s,t=n}}}function Ti(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;{let i=r.head,s=r.tail;if(n(i))return!0;e=s,t=n}}}function pu(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&i.atLeastLength(1)){let o=n.head,l=n.tail,u=i.head,a=i.tail;e=l,t=a,r=h([o,u],s)}else return M(s)}}function ir(e,t){return pu(e,t,f([]))}function du(e,t,r){for(;;){let n=e,i=t,s=r,o=vt(n,i);if(o instanceof X)return h(i,s);o instanceof Q?(e=n,t=i+1,r=h(i,s)):(e=n,t=i-1,r=h(i,s))}}function nn(e,t){return du(e,t,f([]))}function sn(e,t){return Mi(e,r=>{let n=r[0],i=r[1];return g(n,t)?new _(i):new $(void 0)})}function ee(e,t){if(e.isOk()){let r=e[0];return new _(t(r))}else{let r=e[0];return new $(r)}}function we(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return new $(t(r))}}function P(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new $(r)}}function Le(e,t){return P(e,t)}function Wi(e){return e.isOk(),e[0]}function Ni(e){return rn(e,t=>t)}function st(e,t){if(e.isOk()){let r=e[0];return new _(r)}else return new $(t)}function Te(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return t(r)}}var Be=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function xu(e,t){return we(e,r=>S(r,t))}function Fi(e){return cn(e)}function Ji(e){return t=>{if(e.hasLength(0))return new $(f([new Be("another type",G(t),f([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new _(s)}else return Ji(n)(t)}}}function gu(e,t){let r=t,n=Ji(f([cn,o=>ee(Ui(o),y)])),i=(()=>{let o=n(r);if(o.isOk())return o[0];{let l=f(["<",G(r),">"]),u=te(l);return u}})(),s=e;return new Be(s.expected,s.found,h(i,e.path))}function an(e,t){return r=>{let n=new Be("field","nothing",f([]));return P(Pi(r,e),i=>{let o=kt(i,f([n])),l=P(o,t);return xu(l,u=>gu(u,e))})}}var Hi=new WeakMap,fn=new DataView(new ArrayBuffer(8)),pn=0;function dn(e){let t=Hi.get(e);if(t!==void 0)return t;let r=pn++;return pn===2147483647&&(pn=0),Hi.set(e,r),r}function _n(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function $n(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ri(e){fn.setFloat64(0,e);let t=fn.getInt32(0),r=fn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function yu(e){return $n(e.toString())}function bu(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return dn(e);if(e instanceof Date)return Ri(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Z(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Z(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+_n(Z(n),Z(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+_n(Z(o),$n(s))|0}}return r}function Z(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ri(e);case"string":return $n(e);case"bigint":return yu(e);case"object":return bu(e);case"symbol":return dn(e);case"function":return dn(e);default:return 0}}var ge=5,hn=Math.pow(2,ge),ku=hn-1,Ou=hn/2,vu=hn/4,D=0,xe=1,Y=2,Re=3,wn={type:Y,bitmap:0,array:[]};function Lt(e,t){return e>>>t&ku}function ur(e,t){return 1<<Lt(e,t)}function Su(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function xn(e,t){return Su(e&t-1)}function V(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Lu(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function mn(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Gi(e,t,r,n,i,s){let o=Z(t);if(o===n)return{type:Re,hash:o,array:[{type:D,k:t,v:r},{type:D,k:i,v:s}]};let l={val:!1};return At(gn(wn,e,o,t,r,l),e,n,i,s,l)}function At(e,t,r,n,i,s){switch(e.type){case xe:return Au(e,t,r,n,i,s);case Y:return gn(e,t,r,n,i,s);case Re:return zu(e,t,r,n,i,s)}}function Au(e,t,r,n,i,s){let o=Lt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:xe,size:e.size+1,array:V(e.array,o,{type:D,k:n,v:i})};if(l.type===D)return g(n,l.k)?i===l.v?e:{type:xe,size:e.size,array:V(e.array,o,{type:D,k:n,v:i})}:(s.val=!0,{type:xe,size:e.size,array:V(e.array,o,Gi(t+ge,l.k,l.v,r,n,i))});let u=At(l,t+ge,r,n,i,s);return u===l?e:{type:xe,size:e.size,array:V(e.array,o,u)}}function gn(e,t,r,n,i,s){let o=ur(r,t),l=xn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==D){let p=At(u,t+ge,r,n,i,s);return p===u?e:{type:Y,bitmap:e.bitmap,array:V(e.array,l,p)}}let a=u.k;return g(n,a)?i===u.v?e:{type:Y,bitmap:e.bitmap,array:V(e.array,l,{type:D,k:n,v:i})}:(s.val=!0,{type:Y,bitmap:e.bitmap,array:V(e.array,l,Gi(t+ge,a,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Ou){let a=new Array(32),p=Lt(r,t);a[p]=gn(wn,t+ge,r,n,i,s);let d=0,x=e.bitmap;for(let k=0;k<32;k++){if((x&1)!==0){let A=e.array[d++];a[k]=A}x=x>>>1}return{type:xe,size:u+1,array:a}}else{let a=Lu(e.array,l,{type:D,k:n,v:i});return s.val=!0,{type:Y,bitmap:e.bitmap|o,array:a}}}}function zu(e,t,r,n,i,s){if(r===e.hash){let o=yn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Re,hash:r,array:V(e.array,o,{type:D,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:Re,hash:r,array:V(e.array,l,{type:D,k:n,v:i})}}return At({type:Y,bitmap:ur(e.hash,t),array:[e]},t,r,n,i,s)}function yn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(g(t,e.array[n].k))return n;return-1}function or(e,t,r,n){switch(e.type){case xe:return qu(e,t,r,n);case Y:return Eu(e,t,r,n);case Re:return ju(e,n)}}function qu(e,t,r,n){let i=Lt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==D)return or(s,t+ge,r,n);if(g(n,s.k))return s}}function Eu(e,t,r,n){let i=ur(r,t);if((e.bitmap&i)===0)return;let s=xn(e.bitmap,i),o=e.array[s];if(o.type!==D)return or(o,t+ge,r,n);if(g(n,o.k))return o}function ju(e,t){let r=yn(e,t);if(!(r<0))return e.array[r]}function bn(e,t,r,n){switch(e.type){case xe:return Mu(e,t,r,n);case Y:return Tu(e,t,r,n);case Re:return Bu(e,n)}}function Mu(e,t,r,n){let i=Lt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===D){if(!g(s.k,n))return e}else if(o=bn(s,t+ge,r,n),o===s)return e;if(o===void 0){if(e.size<=vu){let l=e.array,u=new Array(e.size-1),a=0,p=0,d=0;for(;a<i;){let x=l[a];x!==void 0&&(u[p]=x,d|=1<<a,++p),++a}for(++a;a<l.length;){let x=l[a];x!==void 0&&(u[p]=x,d|=1<<a,++p),++a}return{type:Y,bitmap:d,array:u}}return{type:xe,size:e.size-1,array:V(e.array,i,o)}}return{type:xe,size:e.size,array:V(e.array,i,o)}}function Tu(e,t,r,n){let i=ur(r,t);if((e.bitmap&i)===0)return e;let s=xn(e.bitmap,i),o=e.array[s];if(o.type!==D){let l=bn(o,t+ge,r,n);return l===o?e:l!==void 0?{type:Y,bitmap:e.bitmap,array:V(e.array,s,l)}:e.bitmap===i?void 0:{type:Y,bitmap:e.bitmap^i,array:mn(e.array,s)}}return g(n,o.k)?e.bitmap===i?void 0:{type:Y,bitmap:e.bitmap^i,array:mn(e.array,s)}:e}function Bu(e,t){let r=yn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Re,hash:e.hash,array:mn(e.array,r)}}function Zi(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===D){t(s.v,s.k);continue}Zi(s,t)}}}var Ae=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=or(this.root,0,Z(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?wn:this.root,s=At(i,0,Z(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=bn(this.root,0,Z(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:or(this.root,0,Z(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Zi(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+_n(Z(r),Z(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!g(t.get(n,!r),r))throw Yi}),!0}catch(r){if(r===Yi)return!1;throw r}}},Yi=Symbol();var kn=void 0,Vi={};function q(e){return e}function K(e){return/^[-+]?(\d+)$/.test(e)?new _(parseInt(e)):new $(kn)}function y(e){return e.toString()}function on(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function zt(e){if(e==="")return 0;let t=lr(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function un(e){let t=lr(e);return t?L.fromArray(Array.from(t).map(r=>r.segment)):L.fromArray(e.match(/./gsu))}var Ki;function lr(e){if(globalThis.Intl&&Intl.Segmenter)return Ki||=new Intl.Segmenter,Ki.segment(e)[Symbol.iterator]()}function ar(e){let t,r=lr(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new _([t,e.slice(t.length)]):new $(kn)}function Ge(e){return[e.charCodeAt(0)|0,e.slice(1)]}function R(e){return e.toLowerCase()}function ln(e,t){return L.fromArray(e.split(t))}function re(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function te(e){let t="";for(let r of e)t=t+r;return t}function On(e,t,r){if(r<=0||t>=e.length)return"";let n=lr(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function W(e,t,r){return e.slice(t,t+r)}function cr(e,t){return e.startsWith(t)}var ts=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Cu=new RegExp(`^[${ts}]*`),Wu=new RegExp(`[${ts}]*$`);function rs(e){return e.replace(Cu,"")}function ns(e){return e.replace(Wu,"")}function $e(){return Ae.new()}function rr(e){return L.fromArray(e.entries())}function Ot(e,t){let r=e.get(t,Vi);return r===Vi?new $(kn):new _(r)}function Ei(e,t,r){return r.set(e,t)}function G(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof rt)return"Result";if(e instanceof L)return"List";if(e instanceof tt)return"BitArray";if(e instanceof Ae)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function vn(e,t){return Nu(e,G(t))}function Nu(e,t){return new $(L.fromArray([new Be(e,t,L.fromArray([]))]))}function cn(e){return typeof e=="string"?new _(e):vn("String",e)}function Ui(e){return Number.isInteger(e)?new _(e):vn("Int",e)}function Pi(e,t){let r=()=>vn("Dict",e);if(e instanceof Ae||e instanceof WeakMap||e instanceof Map){let n=Ot(e,t);return new _(n.isOk()?new m(n[0]):new w)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Xi(e,t,()=>new _(new w)):Xi(e,t,r)}function Xi(e,t,r){try{return t in e?new _(new m(e[t])):r()}catch{return r()}}function vt(e,t){return e===t?new X:e<t?new me:new Q}function fr(e,t,r){let i=e,s=on(i,t,r);return s}function ze(e,t,r){if(r<0)return"";if(t<0){let s=zt(e)+t;return s<0?"":On(e,s,r)}else return On(e,t,r)}function Sn(e){let r=te(e);return r}function Du(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=s+n}}function Ln(e,t){return Du(e,t,"")}function Fu(e,t){let r=zt(t),n=j(e,r),i=J(e,r);return Ln(t,n)+ze(t,0,i)}function Ze(e,t,r){let n=zt(e),i=t-n;return i<=0?e:Fu(i,r)+e}function pr(e){let r=rs(e);return ns(r)}function dr(e,t){for(;;){let r=e,n=t;if(n>0){let s=ar(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function ne(e,t){if(t==="")return un(e);{let n=e,i=ln(n,t);return S(i,q)}}function as(e,t){if(e instanceof Ae||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new _(new w):new _(new m(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof L){let n=0;for(let i of e){if(n===t)return new _(new m(i));n++}return new $("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new _(new m(e[t])):new _(new w):new $(r?"Indexable":"Dict")}function cs(e,t,r,n,i){if(!(e instanceof L||Array.isArray(e))){let o=new qe("List",G(e),i);return[i,L.fromArray([o])]}let s=[];for(let o of e){let l=t(o),[u,a]=l;if(a instanceof Fe){let[p,d]=r(l,n.toString());return[i,d]}s.push(u),n++}return[L.fromArray(s),i]}function fs(e){return Number.isInteger(e)?new _(e):new $(0)}function ps(e){return typeof e=="string"?new _(e):new $(0)}var qe=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},ye=class extends c{constructor(t){super(),this.function=t}};function mr(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new _(n):new $(i)}function ds(e){return new ye(t=>[e,f([])])}function Hu(e,t){return new ye(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Yu(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,l=s.tail,u=o.function(n),a=u;if(u[1].hasLength(0))return a;e=n,t=i,r=l}}}function Ru(e,t){return new ye(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Yu(r,i,t)})}function Gu(e,t){return f([new qe(e,G(t),f([]))])}function _s(e,t,r){let n=r(e);return n.isOk()?[n[0],f([])]:[n[0],f([new qe(t,G(e),f([]))])]}function Zu(e){return g(!0,e)?[!0,f([])]:g(!1,e)?[!1,f([])]:[!1,Gu("Bool",e)]}function Vu(e){return _s(e,"Int",fs)}var ms=new ye(Zu),qt=new ye(Vu);function Ku(e){return _s(e,"String",ps)}var $s=new ye(Ku);function qn(e){return new ye(t=>cs(t,e.function,(r,n)=>_r(r,f([n])),0,f([])))}function _r(e,t){let r=Ru($s,f([Hu(qt,y)])),n=S(t,s=>{let o=s,l=mr(o,r);return l.isOk()?l[0]:"<"+G(o)+">"}),i=S(e[1],s=>{let o=s;return new qe(o.expected,o.found,He(n,s.path))});return[e[0],i]}function Xu(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,a=i;if(s.hasLength(0)){let p=l(u);return _r(p,M(o))}else{let p=s.head,d=s.tail,x=as(u,p);if(x.isOk()&&x[0]instanceof m){let k=x[0][0];e=d,t=h(p,o),r=l,n=k,i=a}else{if(x.isOk()&&x[0]instanceof w)return a(u,h(p,o));{let k=x[0],je=[l(u)[0],f([new qe(k,G(u),f([]))])];return _r(je,M(o))}}}}}function Qu(e,t,r){return new ye(n=>{let i=Xu(e,f([]),t.function,n,(p,d)=>{let A=[t.function(p)[0],f([new qe("Field","Nothing",f([]))])];return _r(A,M(d))}),s=i[0],o=i[1],l=r(s).function(n),u=l[0],a=l[1];return[u,He(o,a)]})}function Et(e,t,r){return Qu(f([e]),t,r)}function jn(e){return JSON.stringify(e)}function hs(e){return Object.fromEntries(e)}function ws(e){return e.toArray()}function xs(e){try{let t=JSON.parse(e);return new _(t)}catch(t){return new $(el(t,e))}}function el(e,t){return tl(e)?new hr:rl(e,t)}function tl(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function rl(e,t){let r=[nl,il,ol,sl];for(let n of r){let i=n(e,t);if(i)return i}return new Ce("",0)}function nl(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=$r(r[1]);return new Ce(n,-1)}function il(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=$r(r[1]),i=Number(r[2]);return new Ce(n,i)}function sl(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=ul(i,s,t),l=$r(t[o]);return new Ce(l,o)}function ol(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=$r(r[2]);return new Ce(n,0)}function $r(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function ul(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var hr=class extends c{},Ce=class extends c{constructor(t){super(),this[0]=t}};var Mn=class extends c{constructor(t){super(),this[0]=t}};function ll(e,t){return Le(xs(e),r=>{let n=mr(r,t);return we(n,i=>new Mn(i))})}function Bn(e,t){return ll(e,t)}function Cn(e){return jn(e)}function jt(e){return e}function Wn(e){return e}function ut(e){return e}function wr(e){return hs(e)}function Nn(e){return ws(e)}function xr(e,t){let n=S(e,t);return Nn(n)}function gs(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new _(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new $(new yr(r.message,n))}}function ys(e,t){e.lastIndex=0;let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0];return new We(i,al(n.slice(1)))});return L.fromArray(r)}function al(e){let t=[];for(let r=e.length-1;r>=0;r--){if(e[r]){t[r]=new m(e[r]);continue}t.length>0&&(t[r]=new w)}return L.fromArray(t)}var We=class extends c{constructor(t,r){super(),this.content=t,this.submatches=r}},yr=class extends c{constructor(t,r){super(),this.error=t,this.byte_index=r}},In=class extends c{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function cl(e,t){return gs(e,t)}function Dn(e){return cl(e,new In(!1,!1))}function Fn(e,t){return ys(e,t)}function Mt(e,t,r){return e?t:r()}var Ve=class extends c{constructor(t,r,n){super(),this.year=t,this.month=r,this.day=n}};var ie=class extends c{},se=class extends c{},oe=class extends c{},ue=class extends c{},le=class extends c{},ae=class extends c{},ce=class extends c{},fe=class extends c{},pe=class extends c{},de=class extends c{},be=class extends c{},Tt=class extends c{};function Bt(e,t){return(e>0&&t<0||e<0&&t>0)&&J(e,t)!==0?j(e,t)-1:j(e,t)}function pl(e,t){let r=J(e,t);return r>0&&t<0||r<0&&t>0?r+t:r}function Ct(e,t){return[Bt(e,t),pl(e,t)]}var vs=864e8;var Ke=class extends c{constructor(t){super(),this.input=t}},Xe=class extends c{constructor(t,r){super(),this.input=t,this.cause=r}},lt=class extends c{constructor(t){super(),this.input=t}},at=class extends c{constructor(t){super(),this.input=t}},kr=class extends c{constructor(t){super(),this.input=t}};var _l=1,Ls=0,ml=0;var $l=!1,hl=!1,zs=0;function As(){return Date.now()*1e3+zs}function Jn(){if(hl)return Ls+zs;if($l){let e=As()-ml,t=Math.trunc(e*_l);return Ls+t}return As()}function qs(){return-new Date().getTimezoneOffset()}var ct=class extends c{constructor(t){super(),this.unix_days=t}},Un=class extends c{constructor(t,r){super(),this.month=t,this.year=r}};var Pn=class extends c{},Wt=class extends c{constructor(t){super(),this.format=t}};function js(e){return new ct(j(e,vs))}function Or(e){return J(e.unix_days+4,7)}function Es(e){let t=Or(e);if(t===0)return"Sun";if(t===1)return"Mon";if(t===2)return"Tue";if(t===3)return"Wed";if(t===4)return"Thu";if(t===5)return"Fri";if(t===6)return"Sat";throw C("panic","tempo",1665,"date_to_day_of_week_short","Invalid day of week found after modulo by 7",{})}function xl(e){let t=Or(e);if(t===0)return"Sunday";if(t===1)return"Monday";if(t===2)return"Tuesday";if(t===3)return"Wednesday";if(t===4)return"Thursday";if(t===5)return"Friday";if(t===6)return"Saturday";throw C("panic","tempo",1678,"date_to_day_of_week_long","Invalid day of week found after modulo by 7",{})}function Ms(e){let t=e-1,r=Bt(t,4)-Bt(t,100)+Bt(t,400);return 365*t+r}function Hn(e){return e===1?new _(new ie):e===2?new _(new se):e===3?new _(new oe):e===4?new _(new ue):e===5?new _(new le):e===6?new _(new ae):e===7?new _(new ce):e===8?new _(new fe):e===9?new _(new pe):e===10?new _(new de):e===11?new _(new be):e===12?new _(new Tt):new $(void 0)}function Nt(e){return e instanceof ie?1:e instanceof se?2:e instanceof oe?3:e instanceof ue?4:e instanceof le?5:e instanceof ae?6:e instanceof ce?7:e instanceof fe?8:e instanceof pe?9:e instanceof de?10:e instanceof be?11:12}function Yn(e){return e instanceof ie?"Jan":e instanceof se?"Feb":e instanceof oe?"Mar":e instanceof ue?"Apr":e instanceof le?"May":e instanceof ae?"Jun":e instanceof ce?"Jul":e instanceof fe?"Aug":e instanceof pe?"Sep":e instanceof de?"Oct":e instanceof be?"Nov":"Dec"}function Ts(e){return e instanceof ie?"January":e instanceof se?"February":e instanceof oe?"March":e instanceof ue?"April":e instanceof le?"May":e instanceof ae?"June":e instanceof ce?"July":e instanceof fe?"August":e instanceof pe?"September":e instanceof de?"October":e instanceof be?"November":"December"}function Bs(e){return J(e,4)===0?J(e,100)===0?J(e,400)===0:!0:!1}function gl(e){let t=e.month;return t instanceof ie?31:t instanceof se?Bs(e.year)?29:28:t instanceof oe?31:t instanceof ue?30:t instanceof le?31:t instanceof ae?30:t instanceof ce||t instanceof fe?31:t instanceof pe?30:t instanceof de?31:t instanceof be?30:31}function Rn(e,t){return gl(new Un(e,t))}function yl(e,t,r){for(;;){let n=e,i=t,s=r,o=Rn(i,n);if(Nt(i)<12&&s>o)e=n,t=i instanceof ie?new se:i instanceof se?new oe:i instanceof oe?new ue:i instanceof ue?new le:i instanceof le?new ae:i instanceof ae?new ce:i instanceof ce?new fe:i instanceof fe?new pe:i instanceof pe?new de:i instanceof de?new be:new Tt,r=s-o;else return new Ve(n,i,s)}}function Cs(e){return e instanceof Pn?"YYYY-MM-DD":(e instanceof Wt,e.format)}function Ws(){return qs()*6e7}var Ns=719163;function Gn(e){return e.unix_days+Ns}function Is(e){let t=Gn(e),r=Ct(t,146097),n=r[0],i=r[1],s=Ct(i,36524),o=s[0],l=s[1],u=Ct(l,1461),a=u[0],p=u[1],d=Ct(p,365),x=d[0],k=d[1],A=k===0?0:1;return n*400+o*100+a*4+x+A}function bl(e){if(e>=0){let r=e+719468,n=j(r>=0?r:r-146096,146097),i=r-n*146097,s=j(i-j(i,1460)+j(i,36524)-j(i,146096),365),o=s+n*400,l=i-(365*s+j(s,4)-j(s,100)),u=j(5*l+2,153),a=l-j(153*u+2,5)+1,p=u+(u<10?3:-9),d=p<=2?o+1:o,x=Hn(p);if(!x.isOk())throw C("let_assert","tempo",1743,"date_calendar_from_unix_days","Pattern match failed, no pattern matched the value.",{value:x});let k=x[0];return new Ve(d,k,a)}else{let r=(()=>{let s=new ct(e);return Gn(s)})(),n=(()=>{let s=new ct(e);return Is(s)})(),i=r-Ms(n);return yl(n,new ie,i)}}function Zn(e){return bl(e.unix_days)}function Ds(e){let t=Zn(e),r=te(f([y(t.year),"-",(()=>{let n=Nt(t.month),i=y(n);return Ze(i,2,"0")})(),"-",(()=>{let n=y(t.day);return Ze(n,2,"0")})()]));return r}function Fs(e,t){let r=Zn(t);if(e==="YY"){let n=r.year,i=y(n),s=Ze(i,2,"0");return ze(s,-2,2)}else if(e==="YYYY"){let n=r.year,i=y(n);return Ze(i,4,"0")}else if(e==="M"){let n=r.month,i=Nt(n);return y(i)}else if(e==="MM"){let n=r.month,i=Nt(n),s=y(i);return Ze(s,2,"0")}else if(e==="MMM"){let n=r.month;return Yn(n)}else if(e==="MMMM"){let n=r.month;return Ts(n)}else if(e==="D"){let n=r.day;return y(n)}else if(e==="DD"){let n=r.day,i=y(n);return Ze(i,2,"0")}else if(e==="d"){let i=Or(t);return y(i)}else if(e==="dd"){let i=Es(t);return ze(i,0,2)}else return e==="ddd"?Es(t):e==="dddd"?xl(t):e}function Js(e){return new ct(e-Ns)}function kl(e){let t=Ms(e.year),r=Bs(e.year)?1:0,n=(()=>{let s=e.month;return s instanceof ie?0:s instanceof se?31:s instanceof oe?59+r:s instanceof ue?90+r:s instanceof le?120+r:s instanceof ae?151+r:s instanceof ce?181+r:s instanceof fe?212+r:s instanceof pe?243+r:s instanceof de?273+r:s instanceof be?304+r:334+r})(),i=t+n+e.day;return Js(i)}function Us(e){return kl(e)}function Ps(e){let t=e[0],r=e[1],n=e[2];return P((()=>{let i=Hn(r);return st(i,new at(y(r)))})(),i=>t>=1e3&&t<=9999?n>=1&&n<=Rn(i,t)?new _(Us(new Ve(t,i,n))):new $(new lt(Yn(i)+" "+y(n))):new $(new kr(y(t))))}var Hs="\\[([^\\]]+)\\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|z{1,2}|S{3,4}|GMT|.";function It(e,t){let r=ne(e,t),n=S(r,K),i=Ni(n),s=P(i,o=>{if(o.hasLength(3)){let l=o.head,u=o.tail.head,a=o.tail.tail.head;return new _([l,u,a])}else return new $(void 0)});return st(s,new Ke(e))}function Ys(e){return Ds(e)}function Rs(e,t){let r=Cs(t),n=Dn(Hs);if(!n.isOk())throw C("let_assert","tempo/date",385,"","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=Fn(i,r),o=M(s),l=he(o,f([]),(u,a)=>{if(a instanceof We&&a.submatches.hasLength(0)){let p=a.content;return h(Fs(p,e),u)}else if(a instanceof We&&a.submatches.hasLength(1)&&a.submatches.head instanceof m){let p=a.submatches.head[0];return h(p,u)}else{let p=a.content;return h(p,u)}});return re(l,"")}function vl(e){return Ps(e)}function Sl(e){return P((()=>{let t=It(e,"-"),r=Te(t,o=>It(e,"/")),n=Te(r,o=>It(e,".")),i=Te(n,o=>It(e,"_")),s=Te(i,o=>It(e," "));return Te(s,o=>{let l=(()=>{let p=ze(e,0,4);return K(p)})(),u=(()=>{let p=ze(e,4,2);return K(p)})(),a=(()=>{let p=ze(e,6,2);return K(p)})();if(l.isOk()&&u.isOk()&&a.isOk()){let p=l[0],d=u[0],x=a[0];return new _([p,d,x])}else return new $(new Ke(e))})})(),t=>{let r=vl(t);return we(r,n=>new Xe(e,n))})}function Gs(e){let t=Sl(e);if(t.isOk())return t[0];throw!t.isOk()&&t[0]instanceof Ke?C("panic","tempo/date",112,"literal","Invalid date literal format",{}):!t.isOk()&&t[0]instanceof Xe&&t[0].cause instanceof lt?C("panic","tempo/date",114,"literal","Invalid date literal day value",{}):!t.isOk()&&t[0]instanceof Xe&&t[0].cause instanceof at?C("panic","tempo/date",116,"literal","Invalid date literal month value",{}):C("panic","tempo/date",118,"literal","Invalid date literal year value",{})}function Ll(e){return js(e)}function Zs(){let e=Jn()+Ws();return Ll(e)}var vr=class extends c{constructor(t){super(),this.all=t}};function Vs(e){return new vr(f([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Qe(e){return Vs((t,r,n,i)=>e(t))}function ke(){return new vr(f([]))}var ft=class extends c{constructor(t){super(),this.content=t}},T=class extends c{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Ft=class extends c{constructor(t){super(),this.subtree=t}},pt=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Jt=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function jl(e){if(e instanceof pt)return new $(void 0);{let t=e[0],r=e[1],n=dr(t,2);return new _([n,r])}}function Ml(e,t,r){return nr(e,t,(n,i,s)=>{let o=r+"-"+y(s);return Ks(i,n,o)})}function Ks(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof ft)return i;if(n instanceof Ft){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,l=n.children,u=he(o,i,(a,p)=>{let d=jl(p);if(d.isOk()){let x=d[0][0],k=d[0][1];return nt(a,s+"-"+x,k)}else return a});return Ml(l,u,s)}}}function Xs(e){return Ks(e,$e(),"0")}function Sr(e,t){return new pt(e,t,!1)}function eo(e,t){return new Jt("on"+e,t)}function E(e){return Sr("class",e)}function to(e){return Sr("type",e)}function ro(e){return Sr("value",e)}function no(e){return Sr("name",e)}function F(e,t,r){return e==="area"?new T("","",e,t,f([]),!1,!0):e==="base"?new T("","",e,t,f([]),!1,!0):e==="br"?new T("","",e,t,f([]),!1,!0):e==="col"?new T("","",e,t,f([]),!1,!0):e==="embed"?new T("","",e,t,f([]),!1,!0):e==="hr"?new T("","",e,t,f([]),!1,!0):e==="img"?new T("","",e,t,f([]),!1,!0):e==="input"?new T("","",e,t,f([]),!1,!0):e==="link"?new T("","",e,t,f([]),!1,!0):e==="meta"?new T("","",e,t,f([]),!1,!0):e==="param"?new T("","",e,t,f([]),!1,!0):e==="source"?new T("","",e,t,f([]),!1,!0):e==="track"?new T("","",e,t,f([]),!1,!0):e==="wbr"?new T("","",e,t,f([]),!1,!0):new T("","",e,t,r,!1,!1)}function io(e){return new ft(e)}var Xn=class extends c{constructor(t){super(),this.dict=t}};function so(){return new Xn($e())}var Lr=class extends c{constructor(t){super(),this[0]=t}},Ar=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},zr=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function oo(e){return g(e.created,$e())&&g(e.removed,so())&&g(e.updated,$e())}var qr=class extends c{constructor(t){super(),this[0]=t}},Er=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Ut=class extends c{constructor(t){super(),this[0]=t}},Oe=class extends c{constructor(t){super(),this[0]=t}},Pt=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},jr=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};var Ht=class extends c{},Mr=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Tr=class extends c{constructor(t){super(),this[0]=t}},Br=class extends c{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Qn(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);l.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);l.appendChild(u),n??=u}else if(o.tag!==void 0){let u=Il({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&l.replaceChild(u,s):l.appendChild(u),n??=u}}return n}function Il({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(Yt.has(o))l=Yt.get(o);else{let O=new Map;Yt.set(o,O),l=O}let u=s?new Set(l.keys()):null,a=s?new Set(Array.from(e.attributes,O=>O.name)):null,p=null,d=null,x=null;if(s&&t.tag==="textarea"){let O=t.children[Symbol.iterator]().next().value?.content;O!==void 0&&(o.value=O)}let k=[];for(let O of t.attrs){let v=O[0],B=O[1];if(O.as_property)o[v]!==B&&(o[v]=B),s&&a.delete(v);else if(v.startsWith("on")){let _e=v.slice(2),Qr=r(B,_e==="input");l.has(_e)||o.addEventListener(_e,Rt),l.set(_e,Qr),s&&u.delete(_e)}else if(v.startsWith("data-lustre-on-")){let _e=v.slice(15),Qr=r(Dl);l.has(_e)||o.addEventListener(_e,Rt),l.set(_e,Qr),o.setAttribute(v,B),s&&(u.delete(_e),a.delete(v))}else v.startsWith("delegate:data-")||v.startsWith("delegate:aria-")?(o.setAttribute(v,B),k.push([v.slice(10),B])):v==="class"?p=p===null?B:p+" "+B:v==="style"?d=d===null?B:d+B:v==="dangerous-unescaped-html"?x=B:(o.getAttribute(v)!==B&&o.setAttribute(v,B),(v==="value"||v==="selected")&&(o[v]=B),s&&a.delete(v))}if(p!==null&&(o.setAttribute("class",p),s&&a.delete("class")),d!==null&&(o.setAttribute("style",d),s&&a.delete("style")),s){for(let O of a)o.removeAttribute(O);for(let O of u)l.delete(O),o.removeEventListener(O,Rt)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let O of o.assignedElements())for(let[v,B]of k)O.hasAttribute(v)||O.setAttribute(v,B)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(x!==null)return o.innerHTML=x,o;let A=o.firstChild,Ee=null,je=null,et=null,Me=Cr(t).next().value;if(s&&Me!==void 0&&Me.key!==void 0&&Me.key!==""){Ee=new Set,je=uo(e),et=uo(t);for(let O of Cr(t))A=Fl(A,O,o,n,et,je,Ee)}else for(let O of Cr(t))n.unshift({prev:A,next:O,parent:o}),A=A?.nextSibling;for(;A;){let O=A.nextSibling;o.removeChild(A),A=O}return o}var Yt=new WeakMap;function Rt(e){let t=e.currentTarget;if(!Yt.has(t)){t.removeEventListener(e.type,Rt);return}let r=Yt.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Rt);return}r.get(e.type)(e)}function Dl(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let u=0,a=s,p=e;u<l.length;u++)u===l.length-1?a[l[u]]=p[l[u]]:(a[l[u]]??={},p=p[l[u]],a=a[l[u]]);return s},{data:n})}}function uo(e){let t=new Map;if(e)for(let r of Cr(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Fl(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*Cr(e){for(let t of e.children)yield*lo(t)}function*lo(e){e.subtree!==void 0?yield*lo(e.subtree()):yield e}var ei=class e{static start({init:t,update:r,view:n},i,s){if(!ri())return new $(new Gt);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new $(new Wr(i));let l=new e(o,t(s),r,n);return new _(u=>l.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof Ut){if(t[0]instanceof Br){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof _&&this.send(new Oe(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Qn(i,r,n)}}else if(t instanceof Oe){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof Pt){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof Ht)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof _&&this.send(new Oe(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Qn(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=l=>this.send(new Oe(l)),i=(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},ao=ei.start;var ti=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new _(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=Xs(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof qr){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof $||this.#r.push(i)}this.#u()}else if(t instanceof Er)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof Ut))if(t instanceof Oe)this.#r.push(t[0]),this.#u();else if(t instanceof Pt){let r=new Ar(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof jr){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof $)return;this.#r.push(n[0]),this.#u()}else if(t instanceof Mr){let r=tn(this.#l),n=new zr(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof Tr&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#a(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!oo(n)){let i=new Lr(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new Oe(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},Jl=ti.start,ri=()=>globalThis.window&&window.document;var ni=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Wr=class extends c{constructor(t){super(),this.selector=t}},Gt=class extends c{};function co(e,t,r){return new ni(e,t,r,new w)}function fo(e,t,r){return Mt(!ri(),new $(new Gt),()=>ao(e,t,r))}function N(e){return io(e)}function ii(e,t){return F("header",e,t)}function si(e,t){return F("h1",e,t)}function oi(e,t){return F("h2",e,t)}function po(e,t){return F("h3",e,t)}function _o(e,t){return F("main",e,t)}function Ne(e,t){return F("div",e,t)}function Nr(e,t){return F("p",e,t)}function mo(e,t){return F("a",e,t)}function $o(e,t){return F("span",e,t)}function Ir(e,t){return F("button",e,t)}function ho(e){return F("input",e,f([]))}function wo(e,t){return F("label",e,t)}function xo(e,t){return eo(e,t)}function Zt(e){return xo("click",t=>new _(e))}function Hl(e){let t=e;return an("target",an("value",Fi))(t)}function go(e){return xo("input",t=>{let r=Hl(t);return ee(r,e)})}var b=class extends c{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Zl(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Se(e,t){return new _((()=>{let r=t;return new b(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new m(e))})())}function Vl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("#")&&l===0){let u=s.slice(1);return Se(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,d.host,d.port,d.path,new m(a),d.fragment)})();return Se(u,p)}else{if(s==="")return new _((()=>{let u=o;return new b(u.scheme,u.userinfo,u.host,u.port,u.path,new m(i),u.fragment)})());{let a=Ge(s)[1];e=i,t=a,r=o,n=l+1}}}}function Ie(e,t){return Vl(e,e,t,0)}function Kl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("?")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,d.host,d.port,a,d.query,d.fragment)})();return Ie(u,p)}else if(s.startsWith("#")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,d.host,d.port,a,d.query,d.fragment)})();return Se(u,p)}else{if(s==="")return new _((()=>{let u=o;return new b(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=Ge(s)[1];e=i,t=a,r=o,n=l+1}}}}function _t(e,t){return Kl(e,e,t,0)}function ve(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),l=(()=>{let u=i;return new b(u.scheme,u.userinfo,u.host,new m(s),u.path,u.query,u.fragment)})();return Ie(o,l)}else if(n.startsWith("#")){let o=n.slice(1),l=(()=>{let u=i;return new b(u.scheme,u.userinfo,u.host,new m(s),u.path,u.query,u.fragment)})();return Se(o,l)}else if(n.startsWith("/")){let o=(()=>{let l=i;return new b(l.scheme,l.userinfo,l.host,new m(s),l.path,l.query,l.fragment)})();return _t(n,o)}else return n===""?new _((()=>{let o=i;return new b(o.scheme,o.userinfo,o.host,new m(s),o.path,o.query,o.fragment)})()):new $(void 0)}}function Dr(e,t){if(e.startsWith(":0")){let r=e.slice(2);return ve(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return ve(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return ve(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return ve(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return ve(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return ve(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return ve(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return ve(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return ve(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return ve(r,t,9)}else{if(e.startsWith(":"))return new $(void 0);if(e.startsWith("?")){let r=e.slice(1);return Ie(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Se(r,t)}else return e.startsWith("/")?_t(e,t):e===""?new _(t):new $(void 0)}}function yo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new _((()=>{let u=o;return new b(u.scheme,u.userinfo,new m(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=W(i,0,l),a=(()=>{let p=o;return new b(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return Dr(s,a)}else if(s.startsWith("/")){let u=W(i,0,l),a=(()=>{let p=o;return new b(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return _t(s,a)}else if(s.startsWith("?")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,new m(a),d.port,d.path,d.query,d.fragment)})();return Ie(u,p)}else if(s.startsWith("#")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,new m(a),d.port,d.path,d.query,d.fragment)})();return Se(u,p)}else{let a=Ge(s)[1];e=i,t=a,r=o,n=l+1}}}function Xl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new _((()=>{let u=o;return new b(u.scheme,u.userinfo,new m(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&l===0){let u=s.slice(1);return Dr(u,o)}else if(s.startsWith("]")){let u=s.slice(1),a=W(i,0,l+1),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,new m(a),d.port,d.path,d.query,d.fragment)})();return Dr(u,p)}else{if(s.startsWith("/")&&l===0)return _t(s,o);if(s.startsWith("/")){let u=W(i,0,l),a=(()=>{let p=o;return new b(p.scheme,p.userinfo,new m(u),p.port,p.path,p.query,p.fragment)})();return _t(s,a)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return Ie(u,o)}else if(s.startsWith("?")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,new m(a),d.port,d.path,d.query,d.fragment)})();return Ie(u,p)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return Se(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,d.userinfo,new m(a),d.port,d.path,d.query,d.fragment)})();return Se(u,p)}else{let u=Ge(s),a=u[0],p=u[1];if(Zl(a))e=i,t=p,r=o,n=l+1;else return yo(i,i,o,0)}}}}function Ql(e,t){return Xl(e,e,t,0)}function ea(e,t){return yo(e,e,t,0)}function dt(e,t){if(e.startsWith("["))return Ql(e,t);if(e.startsWith(":")){let r=(()=>{let n=t;return new b(n.scheme,n.userinfo,new m(""),n.port,n.path,n.query,n.fragment)})();return Dr(e,r)}else return e===""?new _((()=>{let r=t;return new b(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})()):ea(e,t)}function ta(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("@")&&l===0){let u=s.slice(1);return dt(u,o)}else if(s.startsWith("@")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(d.scheme,new m(a),d.host,d.port,d.path,d.query,d.fragment)})();return dt(u,p)}else{if(s==="")return dt(i,o);if(s.startsWith("/"))return dt(i,o);if(s.startsWith("?"))return dt(i,o);if(s.startsWith("#"))return dt(i,o);{let a=Ge(s)[1];e=i,t=a,r=o,n=l+1}}}}function ra(e,t){return ta(e,e,t,0)}function ui(e,t){if(e==="//")return new _((()=>{let r=t;return new b(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return ra(r,t)}else return _t(e,t)}function na(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("/")&&l===0)return ui(s,o);if(s.startsWith("/")){let u=W(i,0,l),a=(()=>{let p=o;return new b(new m(R(u)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment)})();return ui(s,a)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return Ie(u,o)}else if(s.startsWith("?")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(new m(R(a)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Ie(u,p)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return Se(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(new m(R(a)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Se(u,p)}else{if(s.startsWith(":")&&l===0)return new $(void 0);if(s.startsWith(":")){let u=s.slice(1),a=W(i,0,l),p=(()=>{let d=o;return new b(new m(R(a)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return ui(u,p)}else{if(s==="")return new _((()=>{let u=o;return new b(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=Ge(s)[1];e=i,t=a,r=o,n=l+1}}}}}function bo(e){let t=(()=>{let l=e.fragment;if(l instanceof m){let u=l[0];return f(["#",u])}else return f([])})(),r=(()=>{let l=e.query;if(l instanceof m){let u=l[0];return h("?",h(u,t))}else return t})(),n=h(e.path,r),i=(()=>{let l=e.host,u=cr(e.path,"/");if(l instanceof m&&!u&&l[0]!==""){let a=l[0];return h("/",n)}else return n})(),s=(()=>{let l=e.host,u=e.port;if(l instanceof m&&u instanceof m){let a=u[0];return h(":",h(y(a),i))}else return i})(),o=(()=>{let l=e.scheme,u=e.userinfo,a=e.host;if(l instanceof m&&u instanceof m&&a instanceof m){let p=l[0],d=u[0],x=a[0];return h(p,h("://",h(d,h("@",h(x,s)))))}else if(l instanceof m&&u instanceof w&&a instanceof m){let p=l[0],d=a[0];return h(p,h("://",h(d,s)))}else if(l instanceof m&&u instanceof m&&a instanceof w){let p=l[0];return h(p,h(":",s))}else if(l instanceof m&&u instanceof w&&a instanceof w){let p=l[0];return h(p,h(":",s))}else if(l instanceof w&&u instanceof w&&a instanceof m){let p=a[0];return h("//",h(p,s))}else return s})();return Sn(o)}var ia=new b(new w,new w,new w,new w,"",new w,new w);function li(e){return na(e,e,ia,0)}var Vt=class extends c{},Fr=class extends c{},ai=class extends c{},ci=class extends c{},fi=class extends c{},pi=class extends c{},di=class extends c{},_i=class extends c{},mi=class extends c{};var Jr=class extends c{},Kt=class extends c{};function Oo(e){return e instanceof di?"CONNECT":e instanceof fi?"DELETE":e instanceof Vt?"GET":e instanceof ai?"HEAD":e instanceof _i?"OPTIONS":e instanceof mi?"PATCH":e instanceof Fr?"POST":e instanceof ci?"PUT":e instanceof pi?"TRACE":e[0]}function vo(e){return e instanceof Jr?"http":"https"}function So(e){let t=R(e);return t==="http"?new _(new Jr):t==="https"?new _(new Kt):new $(void 0)}var hi=class extends c{constructor(t,r,n,i,s,o,l,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=u}};function Ao(e){return new b(new m(vo(e.scheme)),new w,new m(e.host),e.port,e.path,e.query,new w)}function zo(e){return Le((()=>{let t=e.scheme,r=qi(t,"");return So(r)})(),t=>Le((()=>{let r=e.host;return kt(r,void 0)})(),r=>{let n=new hi(new Vt,f([]),"",t,r,e.port,e.path,e.query);return new _(n)}))}var Ur=class extends c{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function qo(e,t){return sn(e.headers,R(t))}var mt=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Pr(e){return Promise.resolve(mt.wrap(e))}function Eo(e,t){return e.then(r=>t(mt.unwrap(r)))}function Xt(e,t){return e.then(r=>mt.wrap(t(mt.unwrap(r))))}function jo(e,t){return Xt(e,n=>(t(n),n))}function Hr(e,t){return Eo(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Pr(new $(i))}})}async function To(e){try{return new _(await fetch(e))}catch(t){return new $(new wt(t.toString()))}}function Bo(e){return new Ur(e.status,L.fromArray([...e.headers]),e)}function ca(e){let t=bo(Ao(e)),r=Oo(e.method).toUpperCase(),n={headers:fa(e.headers),method:r};return[t,n]}function Co(e){let[t,r]=ca(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function fa(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function wi(e){let t;try{t=await e.body.text()}catch{return new $(new xt)}return new _(e.withFields({body:t}))}var wt=class extends c{constructor(t){super(),this[0]=t}},xt=class extends c{};function Wo(e){let r=Co(e),n=To(r);return Hr(n,i=>Pr(new _(Bo(i))))}var xi=e=>{if(!globalThis.location)return new $(void 0);let t=new URL(e,globalThis.location.href),r=da(t);return new _(r)},da=e=>{let t=r=>r?new m(r):new w;return new b(t(e.protocol?.slice(0,-1)),new w,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var Yr=class extends c{},Rr=class extends c{constructor(t){super(),this[0]=t}},gi=class extends c{constructor(t){super(),this[0]=t}};var yi=class extends c{},Gr=class extends c{constructor(t){super(),this[0]=t}},bi=class extends c{constructor(t){super(),this.run=t}};function _a(e){return new bi(t=>e(P(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new _(r)}else if(n>=400&&n<600){let i=n;return new $(new gi(r))}else return new $(new Gr(r))})))}function ma(e){return _a(t=>e(P(t,r=>{let n=qo(r,"content-type");return n.isOk()&&n[0].startsWith("text/")?new _(r):new $(new Gr(r))})))}function Io(e){return ma(t=>{let n=ee(t,i=>i.body);return e(n)})}function $a(e,t){return Qe(r=>{let n=Wo(e),i=Hr(n,wi),s=Xt(i,l=>we(l,u=>u instanceof wt?new yi:u instanceof xt?new Yr:new Yr)),o=Xt(s,t.run);jo(o,r)})}function ha(e,t){return $a(e,t)}function No(e,t){return Qe(r=>{let n=new $(e),i=t.run(n);return r(i)})}function wa(e){let t=e.startsWith("./")?xi(e):e.startsWith("/")?xi(e):li(e);return st(t,new Rr(e))}function Do(e,t){let r=wa(e);if(r.isOk()){let n=r[0],i=zo(n),s=ee(i,l=>ha(l,t)),o=we(s,l=>No(new Rr(e),t));return Wi(o)}else{let n=r[0];return No(n,t)}}function Fo(e){let t=window.localStorage.getItem(e);if(t===null)return new $(void 0);try{return new _(t)}catch{return new $(void 0)}}function Jo(e,t){window.localStorage.setItem(e,t)}async function Uo(e){navigator.share&&/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?navigator.share(e).catch(console.error):(await navigator.clipboard.writeText(`${e.text} ${e.url}`),alert("Data copied to clipboard"))}var ki=class extends c{constructor(t,r){super(),this.pos=t,this.text=r}},Qt=class extends c{constructor(t,r,n,i,s){super(),this.id=t,this.text=r,this.answers=n,this.correct=i,this.selected=s}},Zr=class extends c{constructor(t,r,n,i){super(),this.results=t,this.answers=r,this.score=n,this.out_of=i}},Vr=class extends c{},Kr=class extends c{constructor(t){super(),this[0]=t}},Xr=class extends c{},er=class extends c{},Oi=class extends c{constructor(t){super(),this[0]=t}},tr=class extends c{constructor(t){super(),this[0]=t}},De=class extends c{constructor(t,r,n,i,s,o,l){super(),this.title=t,this.url=r,this.submitted=n,this.questions=i,this.show_results=s,this.date=o,this.launch_date=l}};function ga(e){return wr(f([["results",xr(e.results,Wn)],["answers",xr(e.answers,ut)],["score",ut(e.score)],["outOf",ut(e.out_of)]]))}function vi(e){let r=Ys(e);return fr(r,"-","")}function ya(e){return Qe(t=>{let r=Fo(vi(e.date));if(r.isOk()){let n=r[0];t(new Kr(n));return}else return})}function Po(e){return Ti(e.questions,t=>g(t.selected,new w))}function ba(e){let t=Po(e)?"cursor-not-allowed text-zinc-300 border-zinc-300":"active:translate-y-0.5 active:scale-95 border-zinc-600 bg-zinc-200";return Ir(f([Zt(new Xr),E("duration-200 border p-2 rounded-md "+t)]),f([N("Submit")]))}function ka(e){return e===0||e===1||e===2?"A BIT OF A FLOP":e===3||e===4||e===5?"BUBBLING UNDER":e===6||e===7||e===8?"HIGHEST NEW ENTRY":e===9?"TAKING THE CHART BY STORM":e===10?"NO 1 SMASH HIT":"WELL DONE"}function Si(e){let t=it(e),r=S(e,s=>{let o=s.selected;if(o instanceof m)return o[0];throw C("panic","mooquiz",313,"","Unfilled scored should never have been saved",{})}),n=S(e,s=>g(s.selected,new m(s.correct))),i=ji(e,s=>g(s.selected,new m(s.correct)));return new Zr(n,r,i,t)}function Oa(e){return Qe(t=>Jo(vi(e.date),(()=>{let r=e.questions,n=Si(r),i=ga(n);return Cn(i)})()))}function Ho(e){let t=S(e,r=>r?"\u2705":"\u274C");return re(t,"")}function va(e,t,r){let n=wr(f([["text",jt("I scored "+y(r.score)+"/"+y(r.out_of)+"  on "+e+`
`+Ho(r.results))],["url",jt(t)]]));return Qe(i=>Uo(n))}function Sa(e,t){if(t instanceof Vr)return[e,va(e.title,e.url,Si(e.questions))];if(t instanceof er)return[(()=>{let r=e;return new De(r.title,r.url,r.submitted,r.questions,!e.show_results,r.date,r.launch_date)})(),ke()];if(t instanceof Kr){let r=t[0],n=Et("answers",qn(qt),s=>Et("results",qn(ms),o=>Et("score",qt,l=>Et("outOf",qt,u=>ds(new Zr(o,s,l,u)))))),i=Bn(r,n);if(i.isOk()){let s=i[0],o=(()=>{let l=s.answers,u=ir(l,e.questions);return S(u,a=>{let p=a[1];return new Qt(p.id,p.text,p.answers,p.correct,new m(a[0]))})})();return[(()=>{let l=e;return new De(l.title,l.url,!0,o,l.show_results,l.date,l.launch_date)})(),ke()]}else return[e,ke()]}else if(t instanceof tr&&t[0].isOk()){let r=t[0][0],n=(()=>{let a=pr(r);return ne(a,`

`)})();if(!n.atLeastLength(1))throw C("let_assert","mooquiz",99,"update","Pattern match failed, no pattern matched the value.",{value:n});let i=n.head,s=n.tail,o=S(s,u=>{let a=ne(u,`
`);if(!a.atLeastLength(2))throw C("let_assert","mooquiz",101,"","Pattern match failed, no pattern matched the value.",{value:a});let p=a.head,d=a.tail.head,x=a.tail.tail,k=(()=>{let Ee=it(x),je=nn(Ee,1),et=M(je),Me=ir(et,x);return S(Me,O=>{let v=O[0],B=O[1];return new ki(v,B)})})();return[p,d,k]}),l=(()=>{let a=it(o),p=nn(a,1),d=M(p),x=ir(d,o);return S(x,k=>{let A=k[0],Ee=k[1][0],je=k[1][1],et=k[1][2];return new Qt(A,Ee,et,(()=>{let Me=K(je);return Me.isOk()?Me[0]:0})(),new w)})})();return[(()=>{let u=e;return new De(i,u.url,u.submitted,l,u.show_results,u.date,u.launch_date)})(),ya(e)]}else{if(t instanceof tr&&!t[0].isOk())return[e,ke()];if(t instanceof Xr)return Po(e)?[e,ke()]:[(()=>{let n=e;return new De(n.title,n.url,!0,n.questions,n.show_results,n.date,n.launch_date)})(),Oa(e)];{let r=t[0],n=ne(r,"-");if(n.hasLength(2)){let i=n.head,s=n.tail.head,o=K(i);if(o.isOk()){let l=o[0],u=S(e.questions,a=>{if(l===a.id){let d=K(s);if(d.isOk()){let x=d[0],k=a;return new Qt(k.id,k.text,k.answers,k.correct,new m(x))}else return a}else return a});return[(()=>{let a=e;return new De(a.title,a.url,a.submitted,u,a.show_results,a.date,a.launch_date)})(),ke()]}else return[e,ke()]}else return[e,ke()]}}}function La(e){if(e.show_results){let r=Si(e.questions);return Ne(f([E("fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50")]),f([Ne(f([E("border-2 border-zinc-600 rounded-lg p-4 absolute bg-white")]),f([ii(f([E("flex")]),f([si(f([E("text-xl font-logo text-head font-extrabold mb-6 grow")]),f([N(ka(r.score))])),mo(f([Zt(new er),E("duration-200 active:translate-y-0.5 active:scale-95 text-lg font-bold cursor-pointer")]),f([N("\u2715")]))])),Nr(f([]),f([N("You scored "+y(r.score)+" out of "+y(r.out_of))])),Nr(f([E("mb-6")]),f([N(Ho(r.results))])),Nr(f([E("mb-6")]),f([N("A new set of questions will appear at midnight.")])),Ne(f([]),f([Ir(f([Zt(new Vr),E("duration-200 border border-zinc-600 p-2 rounded-md active:translate-y-0.5 active:scale-95 border-zinc-600 bg-zinc-200")]),f([N("Share")]))]))]))]))}else return Ir(f([Zt(new er),E("duration-200 border p-2 rounded-md active:translate-y-0.5 active:scale-95 border-zinc-600 bg-zinc-200")]),f([N("Show Results")]))}function Aa(e,t,r){let n=g(e.selected,new m(t.pos)),i=e.correct===t.pos;return r&&i?N("\u2714\uFE0F"):r&&n&&!i?N("\u274C"):r?N(""):ho(f([to("radio"),no("question-"+y(e.id)),ro(y(e.id)+"-"+y(t.pos)),go(s=>new Oi(s))]))}function za(e,t,r){let n=(()=>{let i=g(t.selected,new m(e.pos)),s=t.correct===e.pos;return!r&&i?"bg-selected dark:bg-d-selected":r&&i&&s?"bg-correct dark:bg-d-correct font-bold":r&&i&&!s?"bg-incorrect dark:bg-d-incorrect font-bold":"bg-question dark:bg-d-question hover:bg-question-hover dark:hover:bg-d-question-hover cursor-pointer"})();return wo(f([E("block w-full flex duration-200 p-2 "+n)]),f([$o(f([E("grow")]),f([N(e.text)])),Aa(t,e,r)]))}function qa(e){return Ne(f([E("py-8")]),f([ii(f([]),f([si(f([E("font-logo font-[800] text-shadow-lg shadow-zinc-200 text-5xl text-head dark:d-head")]),f([N("POPQUIZZA")]))])),_o(f([]),f([oi(f([E("text-xl font-bold text-subhead dark:text-d-subhead")]),f([N(e.title)])),oi(f([E("text-sm font-bold mb-8 text-subhead dark:text-d-subhead")]),f([N(Rs(e.date,new Wt("DD-MM-YY")))])),Ne(f([E("flex flex-col gap-6 mb-4")]),S(e.questions,t=>Ne(f([]),f([po(f([E("text-lg font-semibold text-head")]),f([N(t.text)])),Ne(f([E("flex flex-col gap-2")]),S(t.answers,r=>za(r,t,e.submitted)))])))),e.submitted?La(e):ba(e)]))]))}var Ea="https://raw.githubusercontent.com/mooquiz/Questions/refs/heads/main/",ja="2025-04-19";function Ma(e){let t=new De("Loading","popquizza.com",!1,f([]),!0,Zs(),Gs(ja)),r=Ea+vi(t.date)+".txt";return[t,Do(r,Io(n=>new tr(n)))]}function Yo(){let e=co(Ma,Sa,qa),t=fo(e,"#app",void 0);if(!t.isOk())throw C("let_assert","mooquiz",49,"main","Pattern match failed, no pattern matched the value.",{value:t})}Yo();
